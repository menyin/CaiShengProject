var _jlRootDomain="jianli.m.58.com";var _selCitys=[];var zoneData={};var getLocalArray=function(ids,dataSet){var idArray=ids.split(",");return dataSet.map(function(item){return item[item.id]}).reduce(function(prev,curr){return prev.concat(curr)}).filter(function(item){return idArray.indexOf(item.id)>-1}).sort(function(item){return idArray.indexOf(item.id)})};$(function(){Mclient.touchStyle($(".rc_go").parent().parent(),"hover");Mclient.touchStyle($(".sav_btn input"),"hover");Mclient.touchStyle($(".oper_btn input"),"hover");Mclient.touchStyle($(".login a"),"hover");Mclient.touchStyle($(".loginDiv input[type=submit]"),"hover");$(".sel_txt2").parent().parent().css("position","static").parent().css("position","relative");$(".inp_rad").bind("click",function(){$(this).parent().addClass("c_o").siblings().removeClass("c_o")});init_year();$("select").bind("change",function(){$(this).removeClass("c_i")});var setSelectIndex=function(){$(this).parent().removeClass("c_i");if(this.options[this.selectedIndex].text.indexOf("-")>3||this.options[this.selectedIndex].text=="1000以下"||this.options[this.selectedIndex].text=="25000以上"){if($(this.options[this.selectedIndex]).val()!=="-1"){$(this).parent().find(".fl").html(this.options[this.selectedIndex].text+"元/月")}}else{if($(this.options[this.selectedIndex]).val()!=="-1"){$(this).parent().find(".fl").html(this.options[this.selectedIndex].text)}}};$(".sel_txt2").one("click",function(e){setSelectIndex.call(this,e)});$(".sel_txt2").bind("change",function(e){setSelectIndex.call(this,e)});$(".inp_txt,.tex_txt").bind("focus",function(){var $this=$(this);if($this.val().substr(0,1)=="请"||$this.val().substr(0,1)=="尽")$this.val("");$this.removeClass("c_i");var tip=$this.attr("tip");if($this.attr("box")){$this.removeClass("textRt")}$this.parent().parent().find(".wtip").remove();var s='<span class="wtip action"><i></i>'+tip+"</span>";$this.parent().parent().append(s)});$(".inp_txt,.tex_txt").bind("blur",function(e){var $this=$(this);if($this.attr("box")){$this.parent().parent().find(".wtip").remove();var source=$this.val().trim();source=Utility.replacestr(source,'"',"&quot;");source=Utility.replacestr(source,"\n","<br />");source=Utility.replacestr(source,"  ","");if(isHasContact(source)){var message="<span class='wtip wrong'><i></i>"+$this.attr("message")+"</span> ";$this.parent().parent().append(message);return}}valid($this);e.stopPropagation()});if(tid!=""&&tid!=-1){isshowpart(tid)}if(isLogin){$(".login").hide();$(".my58").show()}else{$(".login").show();$(".my58").hide()}$("#r_login_btn").bind("click",function(){try{$("input[name=remember]")[0].checked=true;$("input[name=remember]")[1].checked=true}catch(e){}if($(this).hasClass("showLogin")){$("#job_login").show();$("#job_reg").hide();$(".login_txt").hide();$("#r_login_btn").removeClass("showLogin").hide();$("#r_reg_btn").show();$(".r_tle").hide();clickLog("from=wjl_zhucezhuandenglu")}else{clickLog("from=jianli_post_fillout_micro_login");window.location.href="http://m.m.58.com/login/?path=http://"+_jlRootDomain+"/m/createResumeLogin/?f="+escape(encodeURIComponent(fromUrl))+"&r="+escape(encodeURIComponent(window.location.href))}});$("#r_reg_btn").bind("click",function(){$(".login_txt").show();$("#r_login_btn").addClass("showLogin");$("#r_login_btn").show();$("#r_reg_btn").hide();$("#job_login").hide();$("#job_reg").show();$(".r_tle").html("验证手机号后即可申请该职位，并为您推荐更多高薪好工作！").show();clickLog("from=wjl_dengluzhuanzhuce")});$(".log_tab span").bind("click",function(){$(this).addClass("cur").siblings().removeClass("cur");if($(this).html()=="手机登录"){$("#shoujidenglu").show();$("#zhanghaodenglu").hide();clickLog("from=wjl_shoujidenlgu")}else{$("#shoujidenglu").hide();$("#zhanghaodenglu").show();clickLog("from=wjl_zhanghaodenglu")}});$("#passport_mobileauthlogin_resend_btn").bind("click",function(){clickLog("from=wjl_huitianma")});$("#passport_mobileauthlogin_submit").bind("click",function(){clickLog("from=wjl_zhucequeding")});$("#regButton").bind("click",function(){clickLog("from=wjl_youxiangzhuce")});$("#loginButton").bind("click",function(){clickLog("from=wjl_zdengluqueding")});$(".rc_th").bind("mousedown",function(){var inp=$(this).siblings(".rc_td").find("input");if(inp.length){inp.get(0).focus();return false}});$(".loginDiv").delegate("ul li","mousedown",function(){var inp=$(this).find("input[type=text]");if(inp.length){var btnId=$(this).find("input[type=button]").attr("id");if(btnId&&btnId==="passport_mobileauthlogin_resend_btn"||btnId==="passport_mobilereglogin_resend_btn "){return}else{inp.get(0).focus();return false}}});if($(".upload_list").length){var imgUpload=new ImgUpload({fileInput:"#fileImage",container:"#upload_list",countNum:"#uploadNum"});$(".photo_mes").on("click",function(e){$("#fileImage").trigger(new Event("click"))})}$(".city_input").bind("click",function(){$(".pro_mes").text("最多选择3个区域");isShowProMes("city");if(!$(".cityPopupWin .conLeft li").length){createList("left",zoneData,$(".cityPopupWin .conLeft ul"),"city");conSwipe.doSwipe({list:$(".cityPopupWin .conLeft ul"),parent:$(".cityPopupWin .conLeft")});conSwipe.doSwipe({list:$(".cityPopupWin .conRight ul"),parent:$(".cityPopupWin .conRight")})}$(".cityPopupWin").removeClass("hide");ListMove.touch(".cityPopupWin .selectArea ul")});reqCityZone();bindListEven("city")});var to_resumelist=function(){cancel_but();document.location.href="http://"+_jlRootDomain+"/m_resumelist/?t="+(new Date).valueOf()};var goanylink=function(){cancel_but();document.location.href=url};var valid=function(input){if(input.val().substr(0,1)=="请")input.val("");if(!input.attr("regex"))return 1;var regs=input.attr("regex").split("#"),msgs=input.attr("message").split("#"),value=input.val().trim(),index=0,flag=0;if(!input.attr("regex"))flag=1;if(!flag){flag=1;input.val(value);for(var i=0,len=regs.length;i<len;i++){var re=new RegExp(regs[i].replace(/\\\\/g,"\\"));if(!re.test(value)){flag=0;index=i;break}}}input.parent().parent().find(".wtip").remove();if(flag!=1){input.parent().parent().append('<span class="wtip wrong"><i></i>'+msgs[index]+"</span>")}return flag};var valid_textarea=function(input){input.parent().parent().find(".wtip").remove();var source=input.val().trim();source=Utility.replacestr(source,'"',"&quot;");source=Utility.replacestr(source,"\n","<br />");source=Utility.replacestr(source,"  ","");if(isHasContact(source)){var message="<span class='wtip wrong'><i></i>"+input.attr("message")+"</span> ";input.parent().parent().append(message);return 0}return 1};var form_check=function(){var inputs=$(".inp_txt");error_num=0;for(var i=0;i<inputs.length;i++){var vflag=valid($(inputs[i]));if(vflag==0){error_num++}}if(valid_textarea($("textarea"))==0)error_num++;if(error_num!=0){return 0}return 1};var valid_select=function(){var selects=$(".fl.must");var error_num=0;for(var i=0;i<selects.length;i++){if(!$(selects[i]).text()){alertShow($(selects[i]).attr("message"),"1","确定","",cancel_but,"");error_num++;break}}if(error_num!=0){return 0}return 1};var BasicResumeInfo=function(){var xmlHttp;var postJsonObj;return{deliverSuccess:function(){if(xmlHttp.readyState==4){if(xmlHttp.status==200){if(xmlHttp.responseText.indexOf("error:")!=-1){cancel_but();clickLog("from=jianli_post_MPostSuccess");var msg=xmlHttp.responseText.split(":")[1];if(msg=="validatecode"){$("#rsm_create").show();$(".photos").show();$(".loginDiv").hide();$(".r_tle").html("只要30秒，快速填写求职信息！");$("#codeshow").css("display","block");isShowCode=1;return}if(msg=="sensitive"){var id=xmlHttp.responseText.split(":")[2];$("#hidresume").val(id);Highlights.pushad(1);copyfulltopart(xmlHttp.responseText);alertShow("您的简历正在审核中，休息下再投递吧",undefined,"","","","");setTimeout(function(){cancel_but();document.location.href="http://"+_jlRootDomain+"/m_tomodifyresume/"+id+"?from=wjl"},1e3);return}alertShow(msg,"1","确定","",cancel_but,"")}else if(xmlHttp.responseText!="0"){$("#hidresume").val(xmlHttp.responseText);Highlights.pushad(1);copyfulltopart(xmlHttp.responseText);autodelevery(xmlHttp.responseText);createResumeDelivery(infoid,xmlHttp.responseText,"http://"+_jlRootDomain+"/microresumedeliveryfinish/?infoids="+infoid+"&itype="+itype+"&rid="+xmlHttp.responseText)}else{$("#rsm_create").show();$(".photos").show();$(".loginDiv").hide();$(".r_tle").html("只要30秒，快速填写求职信息！");alertShow("简历创建失败!","1","确定","",cancel_but,"")}}}},addmoreSuccess:function(){if(xmlHttp.readyState==4){if(xmlHttp.status==200){cancel_but();clickLog("from=jianli_post_MPostSuccess");if(xmlHttp.responseText.indexOf("error:")!=-1){var msg=xmlHttp.responseText.split(":")[1];if(msg=="validatecode"){$("#rsm_create").show();$(".photos").show();$(".loginDiv").hide();$(".r_tle").html("只要30秒，快速填写求职信息！");$("#codeshow").css("display","block");isShowCode=1;return}if(msg=="sensitive"){var id=xmlHttp.responseText.split(":")[2];$("#hidresume").val(id);copyfulltopart(id);autodelevery(xmlHttp.responseText);setTimeout(function(){document.location.href="http://"+_jlRootDomain+"/m_tomodifyresume/"+id+"?from=wjl"},1e3);return}alertShow(msg,"1","确定","",cancel_but,"")}else if(xmlHttp.responseText!="0"){$("#hidresume").val(xmlHttp.responseText);Highlights.pushad(1);copyfulltopart(xmlHttp.responseText);autodelevery(xmlHttp.responseText);createResumeDelivery(infoid,xmlHttp.responseText,"http://"+_jlRootDomain+"/m_tomodifyresume/"+xmlHttp.responseText+"?from=wjl")}else{$("#rsm_create").show();$(".photos").show();$(".loginDiv").hide();$(".r_tle").html("只要30秒，快速填写求职信息！");alertShow("简历创建失败!","1","确定","",cancel_but,"")}}}},submitForm:function(op,obj){opStr=op;opObj=obj;$(obj).attr("disabled","disabled");setTimeout(function(){$(obj).removeAttr("disabled")},1e3);if(form_check()==0){focus_to_err();return false}if(valid_select()==0)return false;var ppu=$.cookie.get("PPU");if(ppu){this.subForm(op)}else{var phone=Utility.repLaceData($("#phone").val().trim());$.ajax({type:"POST",dataType:"json",data:"m="+phone,url:"http://"+_jlRootDomain+"/ajax/checkmoblie/",success:function(obj){if(obj!=null&&obj.returnMessage=="success"){if(obj.entity==1){$(".login_txt").hide();$("#r_login_btn").hide();$("#r_reg_btn").show();$(".r_tle").hide();$("#rsm_create").hide();$(".photos").hide();$("#job_login").show();$("#job_reg").hide();$("#pptmobile").val(phone);$("#pptmobileauthloginmobile").val(phone);try{$("input[name=remember]")[0].checked=true;$("input[name=remember]")[1].checked=true}catch(e){}clickLog("from=wjl_denglu")}else{$(".r_tle").html("验证手机号后即可申请该职位，并为您推荐更多高薪好工作！");$("#r_login_btn").addClass("showLogin");$("#rsm_create").hide();$(".photos").hide();$("#job_reg").show();$("#job_login").hide();$("#pptmobile").val(phone);$("#pptmobileauthloginmobile").val(phone);clickLog("from=wjl_zhuce")}}}});return false}},subForm:function(op){if($("#hidresume").val()!=0){alertShow("想再次修改这封简历？您可以在简历管理页面继续完善哦！","2","确定","取消",to_resumelist,cancel_but);return false}if(form_check()==0){focus_to_err();return false}var code="";if(isShowCode==1){if(checkAuthInputforLogin(document.getElementById("validatecode"))){code=$("#validatecode").val()}else{document.getElementById("checkcode").style.display="block";return false}}if(valid_select()==0)return false;var trueName=Utility.repLaceData($("#txtUserName").val());var lights=Utility.encodeTxtBox($("#lights").val());var sex=$("[name='sexType']:checked").val();if(typeof sex=="undefined"){sex=0}var workyears=$("#selWorked").val();if(workyears>0){_workType=0}else{_workType=1}var usermobile=Utility.repLaceData($("#phone").val().trim());var year=$("#year").val();var birthday=year+"-1-1"+" 13:01:01";var from=source_from;if(typeof source_from=="undefined"||source_from==""){from="null"}var areaId=$("#citys").val();if(!areaId){alertShow("忘记选择工作地啦",undefined,"","","","");return false}var isAutoRefresh=document.getElementById("ref").checked;if(isAutoRefresh){clickLog("from=M_WJLtoudi_shuaxinToclick")}if(fromUrl!=null&&fromUrl.indexOf("ysig")!=-1)postJsonObj.f=fromUrl;var photosUrl="";if($(".upload_item").length!=0){var imgs=$(".upload_item:not(.loading_item)>img");for(var i=0,l=imgs.length;i<l;i++){if(i===l-1){photosUrl+=$(imgs[i]).attr("url")}else{photosUrl+=$(imgs[i]).attr("url")+"|"}}postJsonObj={resumeid:$("#hidresume").val(),birthday:birthday,truename:trueName,sex:sex,workyears:workyears,usermobile:usermobile,usercity:0,letter:lights,areaid:areaId,disCateIds:tid,mathresult:iqas_mcresult,iqasinvc:isShowCode,validatecode:code,oriCity:0,autorefresh:isAutoRefresh,sourcefrom:from,photosUrl:photosUrl,usereducation:$("#selEducation").val()};xmlHttp=SimpleXhrFactory.createXhrObject();$("#Pic").val(photosUrl.substr(0,photosUrl.length-1));if($(".loading_item").length){alertShow("图片未完成上传，是否停止上传图片完成发布",2,"立即发布","完成上传",function(){alertShow("正在保存中",undefined,"","","","");if(op=="save"){$.xmlPost(postJsonObj,BasicResumeInfo.addmoreSuccess,xmlHttp,"microresume")}else if(op=="deliver"){$.xmlPost(postJsonObj,BasicResumeInfo.deliverSuccess,xmlHttp,"microresume")}},function(){cancel_but()})}else{alertShow("正在保存中",undefined,"","","","");if(op=="save"){$.xmlPost(postJsonObj,BasicResumeInfo.addmoreSuccess,xmlHttp,"microresume")}else if(op=="deliver"){$.xmlPost(postJsonObj,BasicResumeInfo.deliverSuccess,xmlHttp,"microresume")}}}else{postJsonObj={resumeid:$("#hidresume").val(),birthday:birthday,truename:trueName,sex:sex,workyears:workyears,usermobile:usermobile,usercity:0,letter:lights,areaid:areaId,disCateIds:tid,mathresult:iqas_mcresult,iqasinvc:isShowCode,validatecode:code,oriCity:0,autorefresh:isAutoRefresh,sourcefrom:from,photosUrl:photosUrl,usereducation:$("#selEducation").val()};xmlHttp=SimpleXhrFactory.createXhrObject();alertShow("正在保存中",undefined,"","","","");if(op=="save"){$.xmlPost(postJsonObj,BasicResumeInfo.addmoreSuccess,xmlHttp,"microresume")}else if(op=="deliver"){$.xmlPost(postJsonObj,BasicResumeInfo.deliverSuccess,xmlHttp,"microresume")}}}}}();var createResumeDelivery=function(infoid,rid,tourl){$.ajax({type:"get",dataType:"json",url:"http://"+_jlRootDomain+"/create_resume/delivery?infoid="+infoid+"&rid="+rid+"&fromurl="+document.location.href,success:function(data){}});url=tourl;setTimeout("goanylink()",1e3)};var init_year=function(){var y_option="<option value='-1'>请选择出生年份</option>";for(var i=1998;i>=1959;i--){if(i==year){y_option+="<option value='"+i+"' selected='selected'>"+i+"</option>"}else{y_option+="<option value='"+i+"'>"+i+"</option>"}}$("#year").html(y_option)};var _disId=0,_workType=0;var isshowpart=function(disId){$.ajax({url:"/m/iscopyfulltopart/"+disId,type:"post",cache:false,success:function(data){if(data==1){_disId=disId;$("#partresume").css("display","block");clickLog("from=wjl_jineng")}else{$("#partresume").css("display","none")}}})};var copyfulltopart=function(rid){if($("#partresume").css("display")=="block"&&document.getElementById("echk").checked){$.ajax({url:"/m/ajax/cpPart/"+_disId+"/"+rid,data:{p:_workType},type:"post",cache:false,dataType:"json",success:function(data){}})}};var autodelevery=function(rid){if(document.getElementById("autodelevery").checked){clickLog("from=M_WJLtoudi_weituoToclick");$.ajax({url:"/m/ajax/createDelegate/"+rid+"?callback=?",type:"post",dataType:"json",success:function(data){}})}};var checkAuthInputforLogin=function(thisinput){var re=/([a-zA-Z0-9]){5}/;var count=thisinput.value.length;var codetip=document.getElementById("checkcode");if(thisinput.value==""){codetip.style.display="block";return false}else if(!thisinput.value.match(re)||count!=5){codetip.style.display="block";return false}else{codetip.style.display="none";return true}};var successFunction=function(){BasicResumeInfo.submitForm(opStr,opObj)};var reqCityZone=function(){var city=$.cookie.get("mcity")||"bj";var url="http://"+_jlRootDomain+"/getjobzones/?cityname="+city+"&callback=?";$.getJSON(url,function(data){zoneData=JSON.parse(data.entity);try{_selCitys=getLocalArray($("#citys").val()||"",zoneData)}catch(err){}createList("top",_selCitys,$(".cityPopupWin .selectArea ul"),"city")})};var conSwipe={doSwipe:function(obj){var $ul=obj["list"];$ul.on("touchstart",function(e){this.startY=e.targetTouches[0].screenY;this.startTop=this.y||0;this.startTime=event.timeStamp;this.moved=false;this.scrollerHeight=this.offsetHeight;this.maxScrollY=obj["parent"][0].offsetHeight-this.scrollerHeight+1;this._height=this._height||$(this).parent().height()-$(this).find("li").height()*$(this).find("li").length+1;if(this.isInTransition){var matrix=window.getComputedStyle(this,null);matrix=matrix["webkitTransform"].split(")")[0].split(", ");this.y=matrix[13]||matrix[5];this.y=Math.round(this.y);this.startTop=Math.round(this.y);$(this).css({"-webkit-transform":"translate3d(0,"+this.y+"px, 0)","-webkit-transition-duration":"0"});this.isInTransition=false}});$ul.on("touchmove",function(e){e.preventDefault();e.stopPropagation();this.moved=true;this.y=e.targetTouches[0].screenY-this.startY+this.startTop;if(this.y>0||this.y<this.maxScrollY){var newY=this.y-(e.targetTouches[0].screenY-this.startY)*2/3;this.y=this.y>0?0:this.maxScrollY;if(newY>0||newY<this.maxScrollY){this.y=newY}}$(this).css({"-webkit-transform":"translate3d(0,"+this.y+"px, 0)","-webkit-transition-duration":"0"});this.isInTransition=false;var timeStamp=event.timeStamp;if(timeStamp-this.startTime>300){this.startTime=timeStamp;this.startY=e.targetTouches[0].screenY;this.startTop=this.y}});$ul.on("touchend",function(e){var dist=e.changedTouches[0].screenY-this.startY;this.endTime=event.timeStamp;var duration=this.endTime-this.startTime;if(this.moved){e.preventDefault();e.stopPropagation();var newY=Math.round(e.changedTouches[0].screenY);this.isInTransition=true;if(this.y>0||this.y<this.maxScrollY){conSwipe.scrollTo(this,this.y,this.maxScrollY,600);return}if(duration<300){var move=conSwipe.calculateMoment(this.y,this.startTop,duration,this.maxScrollY,this.wrapH);this.y=move.destination;var time=move.duration;$(this).css({"-webkit-transform":"translate3d(0, "+this.y+"px, 0)","transition-timing-function":"cubic-bezier(0.1, 0.3, 0.5, 1)","-webkit-transition-duration":time+"ms"})}return}})},scrollTo:function(obj,y,maxY,time){if(y>0||maxY>0){y=0}else if(y<maxY){y=maxY}obj.isInTransition=true;$(obj).css({"-webkit-transform":"translate3d(0, "+y+"px, 0)","transition-timing-function":"cubic-bezier(0.25, 0.46, 0.45, 0.94)","-webkit-transition-duration":time+"ms"})},calculateMoment:function(current,start,time,lowerMargin,wrapperSize){var distance=current-start,speed=Math.abs(distance)/time,destination,duration;deceleration=6e-4;destination=current+speed*speed/(2*deceleration)*(distance<0?-1:1);duration=speed/deceleration;if(destination<lowerMargin){destination=wrapperSize?lowerMargin-wrapperSize/2.5*(speed/8):lowerMargin;distance=Math.abs(destination-current);duration=distance/speed}else if(destination>0){destination=wrapperSize?wrapperSize/2.5*(speed/8):0;distance=Math.abs(current)+destination;duration=distance/speed}return{destination:Math.round(destination),duration:duration}}};function createList(dataType,data,listLocation,winType,value){var obj=$(listLocation);var list="";var flag=true;var htmlStr="";var isSelect=false;var value="";if(dataType=="left"){for(var i=0,l=data.length;i<l;i++){value=data[i].id;if(i==0){htmlStr+="<li value='"+value+"' class='selected'>"+data[i].name+"</li>"}else{htmlStr+="<li value='"+value+"'>"+data[i].name+"</li>"}}}else if(dataType=="right"){for(var i=0,l=data.length;i<l;i++){if(winType==="job"){isSelect=handleArrE(_selJobs,data[i].id,"find")}else if(winType==="city"){isSelect=handleArrE(_selCitys,data[i].id,"find")}else if(winType==="nowHome"){flag=false;isSelect=handleArrE(_selNH,data[i].id,"find")}else{flag=false;isSelect=handleArrE(_selJG,data[i].id,"find")}if(flag){if(isSelect){htmlStr+="<li value='"+data[i].id+"' class ='select'><span class='checkItem'><i class='icon'></i></span><span class='checkTxt'>"+data[i].name+"</span></li>"}else{htmlStr+="<li value='"+data[i].id+"'><span class='checkItem'><i class='icon'></i></span><span class='checkTxt'>"+data[i].name+"</span></li>"}}else{if(isSelect){htmlStr+="<li value='"+data[i].id+"' class ='select'><span class='checkTxt'>"+data[i].name+"</span></li>"}else{htmlStr+="<li value='"+data[i].id+"'><span class='checkTxt'>"+data[i].name+"</span></li>"}}}}else{var _selArr=[];if(winType==="job"){_selArr=_selJobs}else{_selArr=_selCitys}htmlStr="";for(var i=0,l=_selArr.length;i<l;i++){htmlStr+="<li value='"+_selArr[i].id+"'><span>"+_selArr[i].name+"<i class='delBtn'></i></span></li>"}}obj.css({"-webkit-transform":"translate3d(0, 0, 0)","-webkit-transition-duration":"0"});obj.html(htmlStr)}var ListCilick=function(obj,locType,winType,rightData,winClass){var dataId="";var dataName="";var htmlStr="";var selObj={id:"",name:""};if(locType==="right_list"){dataId=$(obj).closest("li").attr("value");dataName=$(obj).closest("li").text();if($(obj).closest("li").attr("class")=="select"){$(obj).closest("li").removeClass("select");$(winClass+" .selectArea ul").find("[value='"+dataId+"']").remove();if(winType==="job"){handleArrE(_selJobs,dataId,"delete");isShowProMes("job");ListMove.initPos(winClass+" .selectArea ul")}else if(winType==="city"){handleArrE(_selCitys,dataId,"delete");isShowProMes("city");ListMove.initPos(winClass+" .selectArea ul")}else if(winType==="nowHome"){handleArrE(_selNH,dataId,"delete")}else{handleArrE(_selJG,dataId,"delete")}}else{if(winType==="job"){if(_selJobs.length<5){$(obj).closest("li").addClass("select");htmlStr="<li value='"+dataId+"'><span>"+dataName+"<i class='delBtn'></i></span></li>";$(winClass+" .selectArea ul").append(htmlStr);selObj.id=dataId;selObj.name=dataName;_selJobs.push(selObj);isShowProMes("job");ListMove.initPos(winClass+" .selectArea ul","end")}else{showWranMes(winClass+" .popupCon","最多选择5个类别哦！")}}else if(winType==="city"){if(_selCitys.length<3){$(obj).closest("li").addClass("select");htmlStr="<li value='"+dataId+"'><span>"+dataName+"<i class='delBtn'></i></span></li>";$(winClass+" .selectArea ul").append(htmlStr);selObj.id=dataId;selObj.name=dataName;_selCitys.push(selObj);isShowProMes("city");ListMove.initPos(winClass+" .selectArea ul","end")}else{showWranMes(winClass+" .popupCon","最多选择3个区域哦！")}}else if(winType==="nowHome"){$(winClass+" .conRight .select").removeClass("select");selObj.id=dataId;selObj.name=dataName;_selNH.splice(0,1,selObj);$(obj).closest("li").addClass("select")}else{$(winClass+" .conRight .select").removeClass("select");selObj.id=dataId;selObj.name=dataName;_selJG.splice(0,1,selObj);$(obj).closest("li").addClass("select")}}}else if(locType==="left_list"){dataId=$(obj).attr("value");$(winClass+" .selected").removeClass("selected");$(obj).addClass("selected");$(winClass+" .conLeft").addClass("showRight");$(winClass+" .conRight").removeClass("hide");createList("right",rightData[dataId],$(winClass+" .conRight ul"),winType)}else{dataId=$(obj).closest("li").attr("value");$(obj).closest("li").remove();$(winClass+" .conRight ul").find("[value='"+dataId+"']").removeClass("select");if(winType==="job"){handleArrE(_selJobs,dataId,"delete");isShowProMes("job")}else{handleArrE(_selCitys,dataId,"delete");isShowProMes("city")}ListMove.initPos(winClass+" .selectArea ul")}};function handleArrE(arr,popId,type){var flag=false;for(var i=0;i<arr.length;i++){if(arr[i].id==popId){if(type=="delete"){arr.splice(i,1)}else if(type=="find"){flag=true}break}}return flag}var ListMove={moveX:0,touch:function(id){var obj=$(id);var startX,x=0;var moveX=0;var beforeLeft=obj.offset().left;obj.bind("touchstart",function(event){var touch=event.targetTouches[0];startX=touch.pageX;var transform=$(this).css("-webkit-transform");var translateX=parseInt(transform.split(/[(]|[,]|[)]/)[2]);x=translateX||ListMove.moveX});obj.bind("touchmove",function(event){event.preventDefault();var touch=event.targetTouches[0];ListMove.moveX=touch.pageX-startX+x;obj.css({"-webkit-transition-duration":"0","-webkit-transform":"translate3d("+ListMove.moveX+"px,0, 0)"})});obj.bind("touchend",function(event){ListMove.initPos(obj)})},initPos:function(id,type){var obj=$(id);var afterLeft=obj.offset().left;var afterRight=obj.offset().right;var parentW=obj.parent().width();var thisW=obj.width();type=type||null;if(thisW>parentW){if(afterLeft>0){ListMove.moveX=0}else if(afterRight<parentW||type=="end"){ListMove.moveX=-(thisW-parentW)-10}}else{ListMove.moveX=0}obj.css({"-webkit-transition-duration":"300ms","-webkit-transform":"translate3d("+ListMove.moveX+"px,0, 0)"})}};var bindListEven=function(type){if(type==="job"){$(".jobPopupWin .conLeft ul").bind("click",function(e){var obj=e.target;ListCilick(obj,"left_list",type,datasrc,".jobPopupWin")});$(".jobPopupWin .conRight ul").bind("click",function(e){var obj=e.target;ListCilick(obj,"right_list",type,"",".jobPopupWin")});$(".jobPopupWin .selectArea ul").bind("click",function(e){var obj=e.target;ListCilick(obj,"sel_list",type,"",".jobPopupWin")});$("#finJob,.jobPopupWin .popupBg").bind("click",function(){var txt="";for(var i=0,l=_selJobs.length;i<l;i++){txt+=_selJobs[i].name+"  "}$(".job_input .fl").text(txt);$("#jobs").attr("value",getIds(_selJobs));$(".popupWin").addClass("hide")})}else if(type==="city"){$(".cityPopupWin .conLeft ul").bind("click",function(e){var obj=e.target;var zoneId=$(obj).closest("li").attr("value");var rightData={};for(var i=zoneData.length-1;i>=0;i--){if(zoneData[i].id===zoneId){rightData=zoneData[i];break}}ListCilick(obj,"left_list",type,rightData,".cityPopupWin")});$(".cityPopupWin .conRight ul").bind("click",function(e){var obj=e.target;ListCilick(obj,"right_list",type,"",".cityPopupWin")});$(".cityPopupWin .selectArea ul").bind("click",function(e){var obj=e.target;ListCilick(obj,"sel_list",type,"",".cityPopupWin")});$("#finCity,.cityPopupWin .popupBg").bind("click",function(){var txt="";for(var i=0,l=_selCitys.length;i<l;i++){txt+=_selCitys[i].name+"  "}$(".city_input .fl").text(txt);$("#citys").attr("value",getIds(_selCitys));$(".popupWin").addClass("hide")})}else if(type==="nowHome"){$(".nowHomePopupWin .conLeft ul").bind("click",function(e){var obj=e.target;var zoneId=$(obj).closest("li").attr("value");var rightData={};for(var i=zoneData.length-1;i>=0;i--){if(zoneData[i].id===zoneId){rightData=zoneData[i];break}}ListCilick(obj,"left_list",type,rightData,".nowHomePopupWin")});$(".nowHomePopupWin .conRight ul").bind("click",function(e){var obj=e.target;ListCilick(obj,"right_list",type,"",".nowHomePopupWin")});$("#finNH,.nowHomePopupWin .popupBg").bind("click",function(){var txt=$(".nowHomePopupWin .select .checkTxt").text();$(".nowhome_input .fl").text(txt);$("#nowhome").attr("value",getIds(_selNH));$(".popupWin").addClass("hide")});$(".nowHomePopupWin").on("click",".conRight li",function(){var txt=$(".nowHomePopupWin .select .checkTxt").text();$(".nowhome_input .fl").text(txt);$("#nowhome").attr("value",getIds(_selNH));$(".popupWin").addClass("hide")})}else{$(".jgPopupWin .conLeft ul").bind("click",function(e){var obj=e.target;var dataId=$(obj).attr("value");var rightData={};for(var i=0,l=provinceData.length;i<l;i++){if(provinceData[i].id===dataId){rightData=provinceData[i];break}}ListCilick(obj,"left_list",type,rightData,".jgPopupWin")});$(".jgPopupWin .conRight ul").bind("click",function(e){var obj=e.target;ListCilick(obj,"right_list",type,"",".jgPopupWin")});$("#finJG,.jgPopupWin .popupBg").bind("click",function(){var txt=$(".jgPopupWin .select .checkTxt").text();$(".jg_input .fl").text(txt);$("#jiguan").attr("value",getIds(_selJG));$(".popupWin").addClass("hide")});$(".jgPopupWin").on("click",".conRight li",function(){var txt=$(".jgPopupWin .select .checkTxt").text();$(".jg_input .fl").text(txt);$("#jiguan").attr("value",getIds(_selJG));$(".popupWin").addClass("hide")})}};function isShowProMes(type){if(type=="job"){if(_selJobs.length==0){$(".pro_mes").removeClass("hide")}else{$(".pro_mes").addClass("hide")}}else{if(_selCitys.length==0){$(".pro_mes").removeClass("hide")}else{$(".pro_mes").addClass("hide")}}}function showWranMes(obj,mes){var $this=$(obj);var htmlStr="";if($this.find(".wran_mes")[0]){$(obj+" .wran_mes").removeClass("hide")}else{htmlStr="<div class='wran_mes'>"+mes+"</div>";$this.append(htmlStr)}setTimeout(function(){$this.find(obj+" .wran_mes").addClass("fade");setTimeout(function(){$this.find(obj+" .wran_mes").addClass("hide").removeClass("fade")},500)},500)}function getIds(arr){var ids="";for(var i=0,l=arr.length;i<l;i++){if(l===1||i===arr.length-1){ids+=arr[i].id}else{ids+=arr[i].id+","}}return ids}