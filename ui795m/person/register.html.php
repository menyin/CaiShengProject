<?exit?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
	<meta charset="utf-8" />
	<meta content="yes" name="apple-mobile-web-app-capable"/>
	<meta content="yes" name="apple-touch-fullscreen"/>
	<meta content="telephone=no" name="format-detection"/>
	<meta name="apple-mobile-web-app-title" content="{$domainInfo['region_name_short']}597人才网">
	<meta name="apple-mobile-web-app-status-bar-style" content="black">
	<link rel="apple-touch-icon-precomposed" href="http://cdn.597.com/m/75x75.png" >
	<title>求职注册-{$domainInfo['region_name_short']}597人才网触屏版</title>
	<meta name="keywords" content="{$domainInfo['region_name_short']}人才网,{$domainInfo['region_name_short']}人才网最新招聘信息,{$domainInfo['region_name_short']}找人才,{$domainInfo['region_name_short']}招聘网,{$domainInfo['region_name_short']}招聘,{$domainInfo['region_name_short']}求职,{$domainInfo['region_name_short']}招聘会,{$domainInfo['region_name_short']}找工作,{$domainInfo['region_name_short']}人才市场,{$domainInfo['region_name_short']}人事人才网,{$domainInfo['region_name_short']}人事资源网,597{$domainInfo['region_name_short']}人才网" />
	<meta name="description" content="{$domainInfo['region_name_short']}597人才网,{$domainInfo['region_name_short']}招聘,求职的最佳选择,网上的{$domainInfo['region_name_short']}人才市场。597{$domainInfo['region_name_short']}人才网是{$domainInfo['region_name_short']}地区的专业招聘网站,{$domainInfo['region_name_short']}找人才,{$domainInfo['region_name_short']}找工作,查询{$domainInfo['region_name_short']}人才网最新招聘信息,首选597{$domainInfo['region_name_short']}人才网！" />
	<meta name="revisit-after"	content="1 days" />
	<meta name="viewport" content="initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=no" />
	<script type="text/javascript" language="javascript" src="http://cdn.597.com/m/js/jquery-1.8.3.min.js?v=20140312"></script>
	<script type="text/javascript" language="javascript" src="http://cdn.597.com/m/js/m.js?v=20140313"></script>
	<script type="text/javascript" language="javascript" src="http://cdn.597.com/m/js/mobile.form.js?v=20140319"></script>
	<link rel="stylesheet" type="text/css" href="http://cdn.597.com/m/css/m_login2.css?v=20150106" />
	<link rel="stylesheet" type="text/css" href="http://cdn.597.com/m/css/m_style2.css?v=20140325" />
	<style>
		.kf_con{display: inline-block;width: 100%;margin-top: 10px;}
		.kf_con p{ font-size:12px; color:#999; line-height:23px; height:23px;}
		.kf_con p a{ color:#3D84B8; margin-right:8px;}
		.dialog {width:280px; height: 160px; background: #fff; z-index: 9999; left:50%; top:50%; margin-top: -80px; margin-left: -140px; position: fixed; display: none;}
		.mask {display: none;}
		.dialog h2 {background: #f2f2f2; height: 32px; line-height: 32px; border-bottom:1px solid #ddd; font-size: 14px; padding:0 10px; position: relative; }
		.dialog h2 span {font-size: 18px; position: absolute; right:0; top:0; cursor: pointer; padding:0 10px;}
		.dialog_con {padding:10px;}
		.dialog_con .change {font-size: 14px; color:#09f; margin-left: 10px;}
		.dialog .text {border:1px solid #ddd; width: 100px; height: 35px; line-height: 35px; text-indent: 10px;}
		.dialog .submitBtn {height:30px;line-height:30px;display:inline-block; color:#fff;background:#3d86bc;border:1px solid #397eb2;box-shadow:0 1px 0 #59a0d5 inset; padding:0 15px; border-radius:4px; margin-top: 10px; }
		/*
		.kf_con i.fa-qq {color: #5294D0;}
		.kf_con i.fa {
		    font-size: 18px;
		    padding-right: 5px;
		}
		@font-face {
			font-family: 'jpFntWes';
			src:url('http://cdn597.b0.upaiyun.com/css/font/fontawesome.eot');
			src:url('http://cdn597.b0.upaiyun.com/css/font/fontawesome.eot?#iefix') format('embedded-opentype'),
				url('http://cdn597.b0.upaiyun.com/css/font/fontawesome.woff') format('woff'),
				url('http://cdn597.b0.upaiyun.com/css/font/fontawesome.ttf') format('truetype'),
				url('http://cdn597.b0.upaiyun.com/css/font/fontawesome.svg#fontawesome') format('svg');
			font-weight: normal;
			font-style: normal;
		}
		.fa {
		    display: inline-block;
		    font: normal normal normal 14px/1 jpFntWes;
		    font-size: inherit;
		    text-rendering: auto;
		    -webkit-font-smoothing: antialiased;
		    -moz-osx-font-smoothing: grayscale;
		}
		.fa-qq:before {
		    content: "\f1d6";
		}
		*/
	</style>
</head>
<body>
<div class="content" style=" background-color:#efefef">
<!--{template header}-->
<header style=" background:#E8352E; border-bottom:1px solid #E8352E;">
    <a class="btn_back" id="btn_back" href="/"></a>
    <h2 style="white-space:nowrap;text-overflow:ellipsis;overflow:hidden">求职会员中心</h2>
</header>
<div id="EntPage"> </div>
<div id="divHeader" name="divHeader">
<div class="fullscreenRegister">
	<div id="ctl00_ContentPlaceHolder1_chooseLogin">
		<div class="top_menu">
			<div class="selected" style="width: 50%;"> <a class="loginTitle"><span class="personlogin"></span>求职者注册 </a> </div>
			<div style="width: 50%;" class="noselected"> <a class="loginTitle" href="/company/register.html"><span class="companylogin"></span>企业注册</a> </div>
		</div>
	</div>
	<span style="display:inline-block;width:90%;margin-left:5%; margin-top:10px;">注册并填写好简历，您就可以随时通过{$domainInfo['region_name_short']}597人才网申请满意的职位</span>
</div>
<div id="divTelphone" style="display: block;">
<form id="formRegister" name="formRegister" action="/api/web/person.api" method="post">
	<input  type='hidden' name='act' value='register_m'>
	<input  type='hidden' name='txtAppType' value='2'>
	<input  type="hidden" name="source" value="phone">
	<div class="boxM">
		<div class="boxdiv">
			<div class="boxdivleft"> 手机号 </div>
				<div class="boxdivright">
					<div style="width: 100%">
						<input id="txtMobilePhone" name="txtMobile" autocomplete="off" type="tel" placeholder="用于登录和找回密码" maxlength="11" style="font-size:12px;line-height: 35px;width: 100%;" onkeyup="this.value=this.value.replace(/[^0-9-]+/,'');">
					</div>
				</div>
			</div>
		</div>
		<div style="clear:both; "></div>
		<div id="telphoneInfo" style="width: 90%;margin: auto;margin-top: 18px; ">
			<div style="float:left; width:28%; min-width:140px;">
			<!-- <input type="button" class="btnSendCode" name="btnSendCode" id="btnSendValidate" value="获取短信验证码"> -->
			<a href="javascript:void(0)" id="btnSendValidate" style="width: 138px;height: 35px;border-radius: 3px;background:#05a52b;cursor: pointer;font-size: 14px;color: #fff;display:block; line-height:35px; text-align:center;">免费获取验证码</a>
		</div>
		<div style="float:right; width:40%;font-size: 12px;color: #6c6c6c; vertical-align:middle;">
			<div class="boxM" style=" margin-top:0px; width:99%;">
				<div class="boxdiv">
					<div style="width: 100%">
						<input id="txtMobilPhoneCode" placeholder="请输入验证码" name="txtMobileCode" autocomplete="off" type="tel" maxlength="4" style="font-size:12px;line-height: 35px;width: 100%;"  onkeyup="this.value=this.value.replace(/[^0-9-]+/,'');">
					</div>
				</div>
			</div>
		</div>
		<div class="kf_con">
			<p>无法获取验证码请联系客服：<a href="tel:0592-5899196"></a>0592-5899196 </p>
			<p>
				<i><img src="http://cdn.597.com/m/images/qqp.png" width="14" /></i><script>if(/Android/i.test(navigator.userAgent)){
                        	document.writeln("<a href='mqqwpa://im/chat?chat_type=wpa&uin=235575183&version=1'><i class='fa fa-qq'></i>235575183</a>")
                        }else{
                          	document.writeln("<a href='mqq://im/chat?chat_type=wpa&uin=235575183&version=1&src_type=web'><i class='fa fa-qq'></i>235575183</a>")
                        }
                        </script>
				<i><img src="http://cdn.597.com/m/images/qqp.png" width="14" /></i><script>if(/Android/i.test(navigator.userAgent)){
                        	document.writeln("<a href='mqqwpa://im/chat?chat_type=wpa&uin=2355751685&version=1'><i class='fa fa-qq'></i>2355751685</a>")
                        }else{
                          	document.writeln("<a href='mqq://im/chat?chat_type=wpa&uin=2355751685&version=1&src_type=web'><i class='fa fa-qq'></i>2355751685</a>")
                        }
                        </script>
				<i><img src="http://cdn.597.com/m/images/qqp.png" width="14" /></i><script>if(/Android/i.test(navigator.userAgent)){
                        	document.writeln("<a href='mqqwpa://im/chat?chat_type=wpa&uin=2355751690&version=1'><i class='fa fa-qq'></i>2355751690</a>")
                        }else{
                          	document.writeln("<a href='mqq://im/chat?chat_type=wpa&uin=2355751690&version=1&src_type=web'><i class='fa fa-qq'></i>2355751690</a>")
                        }
                        </script>
			</p>
		</div>
		<div>
			<a target="_blank" href="tencent://message/?uin=740949746&Site=yige.org&Menu=yes"></a>
		</div>
	</div>
	<div style="clear:both; "></div>
	<div class="boxM">
		<div class="boxdiv">
			<div class="boxdivleft"> 设置密码 </div>
			<div class="boxdivright">
				<div style="width: 100%">
					<input name="txtPwd" autocomplete="off" type="password" id="txtPwd" placeholder="6-20个字符" minlength="6" maxlength="16" class="txt" style="font-size:12px;line-height: 35px;width: 100%;">
				</div>
			</div>
		</div>
	</div>
	<span id="spMobilePassword" class="TipsError" style="display:block"></span>
	<div class="boxM">
		<div class="boxdiv">
			<div class="boxdivleft"> 确认密码 </div>
			<div class="boxdivright">
				<div style="width: 100%">
					<input name="txtPwdRepeat" type="password" id="txtPwdRepeat" autocomplete="off" placeholder="与密码保持一致" minlength="6" maxlength="16" class="txt" style="font-size:12px;line-height: 35px;width: 100%;">
				</div>
			</div>
		</div>
	</div>
	<span id="spMobilePasswordConfirm" class="TipsError" style="display: block;"></span>
	<div style="width: 90%;margin: auto;margin-top: 28px; height:28px;display:none;">
		<span id="mobile_chk" style="width:30px; padding-left:5px;vertical-align: middle;" class="ck_yes" value="1" onclick="xieyi_choice(this)"></span>
		<span style="color:#6c6c6c; font-size:14px;">我已阅读并接受<span onclick="DisplayXieyi()" style="color:blue; cursor:pointer;">用户协议</span></span>
	</div>
	<div class="login" style=" margin-top:5px; margin-bottom:15px">
		<button class="loginLine login_button" name="btnRegister" type="button" id="btnRegister" style=" text-align:center; font-size:20px; vertical-align:middle"> <span>注 册</span> </button>
		<!-- <button class="loginLine cv_button" name="btnCv" type="button" style="text-align:center; font-size:20px; vertical-align:middle;" onclick="location.href='/person/fast_resumes.html?act=base';return false"> <span>一分钟填写简历</span> </button> -->
	</div>
</form>
</div>
<div class="mask"></div>
<div class="dialog">
	<h2><span>&times;</span>请输入验证码</h2>
	<div class="dialog_con">
		<form id="form" style="overflow:hidden" onkeydown="if(event.keyCode==13)return false;">
			<input type="hidden" name="txtSeed" value="mPerMobile" />
			<input type="hidden" name="mtxtMobile" id="mtxtMobile" value="" />
			<input type="hidden" name="key" value="mPerMobile">
			<input type="hidden" name="act" value="authCode">
			<input type='text' name="inputCode" id="inputCode" size="5" class="text" value="" style="width:70px;" />
			<img class="code" src="/api/web/authCode.api?key=mPerMobile" alt="" />
			<a href="#" class="change">换一换</a>
			<p><a href="#" class="submitBtn">确认</a></p>
		</form>
	</div>
</div>
<!--{template footer2}-->
<script type="text/javascript">
/*var sendMsgUrl = "/api/web/user.api";*/
$(document).ready(function(){
	$.focusblur('input.text');
	//发送验证码
	$('#btnSendValidate').click(function(){
		sendMsg();
	});

	$('#btnRegister').click(function(){
		var phone = $('#txtMobilePhone').val();
		var code = $('#txtMobilPhoneCode').val();
		/*var username = $('#txtUserName').val();*/
		var password = $('#txtPwd').val();
		var password2 =  $('#txtPwdRepeat').val();
		var phone_pattern = /^[1]\d{10}$/;
		var code_pattern = /^\d{4,6}$/;
			if(phone==''||typeof(phone)=='undefined'){
				alert('请填写手机号码!');
				return;
			}
			if(!phone_pattern.exec(phone)){
				alert('手机号码格式不正确!');
				return;
			}
			if(code==''||typeof(code)=='undefined'){
				alert('请填验证码!');
				return;
			}
			if(!code_pattern.exec(code)){
				alert('验证码格式不正确!');
				return;
			}
			/*if(username==''||typeof(username)=='undefined'){
				alert('请填写姓名');
				return;
			}
			if(username.length>6||username.length<2){
				alert('姓名为2-6个字');
				return;
			}*/
			if(password==''||typeof(password)=='undefined'){
				alert('请填写密码!');
				return;
			}
			var patten = new RegExp('^[0-9]+$');
			if (phone == password) {
				alert('密码和用户名不能相同!');
				return;
			}
			if (/^(\d)\1+$/.test(password)){
				alert('密码不能为同一个数字!');
				return;
			}
			var str = password.replace(/\d/g, function($0, pos) {
				return parseInt($0)-pos;
			});
			if (/^(\d)\1+$/.test(str)){
				alert('密码不能为连续数字!');
				return;
			}
			str = password.replace(/\d/g, function($0, pos) {
				return parseInt($0)+pos;
			});
			if (/^(\d)\1+$/.test(str)){
				alert('密码不能为连续数字!');
				return;
			}
			if(password.length>16 || password.length<6){
				alert('密码只能输入6-16位字符！');
				return;
			}
			if(password2==''||typeof(password2)=='undefined'){
				alert('请填写确认密码!');
				return;
			}
			if(password!=password2){
				alert('两次密码输入不一致!');
				return;
			}
	/*
		$.getJSON("/api/web/person.api", { act: 'register_m', txtMobile: phone, txtMobileCode: code, txtPwd: password, txtPwdRepeat: password2, txtAppType: 2, source: "phone"}, function(json) {
			if(json.status>0){
				alert('注册成功！');
				window.location.href = '/person/';
				return;
			}else{
				alert(json.msg);
				return;
			}
		});*/


		$('#btnRegister').submitForm({success:success,clearForm:false});
	});
});
/*function checkMobile(){
	var phone = $('#txtMobilePhone').val();
	if(phone==''){
		alert('请填写手机号码!');
		return;
	}
	var pattern = /^[1]\d{10}$/;
	if(!pattern.exec(phone)){
		alert('手机号码格式不正确!');
		return;
	}

	$.getJSON("/api/web/user.api", { act: 'mobileRepeat', _txtMobile: $("#txtMobilePhone").val()}, function(json) {
		if(json.status==-1){
			alert('该手机已经被注册，请换一个手机再注册！');
			return;
		}else if(json.status==0){
			alert('手机格式错误！');
			return;
		}
	});

}*/
function success(json){
	if (json.status > 0) {
		alert('注册成功！');
		window.location.href = '/person/';
	}else{
		alert(json.msg);
		return;
	}
}

function sendMsg(){
	var phone = $('#txtMobilePhone').val();
	if(phone==''){
		alert('请填写手机号码!');
		return;
	}
	var pattern = /^[1]\d{10}$/;
	if(!pattern.exec(phone)){
		alert('手机号码格式不正确!');
		return;
	}
	$('#mtxtMobile').val(phone);
	$('.mask,.dialog').show();  //显示验证码弹窗
	return;
	$('#btnSendValidate').unbind('click');
	var data={txtPhone:$('#txtMobilePhone').val()};
	$.getJSON("/api/web/user.api", { act: 'mobile_check_reg', _txtMobile: $("#txtMobilePhone").val(),type:'reg'}, function(json) {
		if(json.status==-99){
			$('#btnSendValidate').bind("click",function(){
				sendMsg();
			});
			alert('该手机号已注册过，请尝试登录！');
			window.location.href = '/person/login.html';
			return;
		}else if(json.status<0 && json.status!=-99){
			$('#btnSendValidate').bind("click",function(){
				sendMsg();
			});
			alert(json.msg);
			return;
		}
		$('#btnSendValidate').addClass('btn3Unclick').html('<i>60</i>秒后重新获取');
		alert("已发送验证码短信到您的手机！");
		$('#txtValidateCode').focus();
		//$('#divValiMobile').show();
		interval = window.setInterval(countdown,1000);
	});

}

$('.dialog').find('h2 span').click(function(){
	$('.mask,.dialog').hide();
});

$('.dialog').find('.code,.change').click(function(){
	$('.code').attr('src',"/api/web/authCode.api?key=mPerMobile&"+Math.random());
});

$('.submitBtn').click(function(){
	//$('.dialog').find('.code,.change').click();
	if($('.dialog .text').val() == ''){
		alert('验证码不能为空');
	} else {
		$('#btnSendValidate').unbind('click');
		$.ajax({
			url : "/api/web/user.api",
			type : "POST",
			data : $("#form").serialize(),
			dataType : "JSON",
			success : function(data) {
				if (data && data.status<1) {
					if(data.status==-101){
						$('#btnSendValidate').bind("click",function(){
							sendMsg();
						});
						alert('该手机号已注册过，请尝试登录！');
						window.location.href = '/person/login.html';
						return;
					}
					if(data.status==-1){
						$(".change").click();
					}
					alert(data.msg);
					return;
				} else {
					$('#btnSendValidate').addClass('btn3Unclick').html('<i>60</i>秒后重新获取');
					alert("已发送验证码短信到您的手机！");
					$('#txtValidateCode').focus();
					interval = window.setInterval(countdown,1000);
					$('.mask,.dialog').hide();
				}
			}
		});

	}
});

function countdown(){
	var seconds=$('#btnSendValidate').find('i').html();
	seconds = parseInt(seconds);
	if(seconds>0){
		seconds--;
		$('#btnSendValidate').find('i').html(seconds);
	}else{
		window.clearInterval(interval);
		$('#btnSendValidate').removeClass('btn3Unclick').html('免费获取验证码').bind("click",function(){
			sendMsg();
		});
	}
}
</script>
</body>
</html>
