<?exit?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content="" />
	<meta name="description" content="" />
	<meta http-equiv="Content-Language" content="zh-CN" />
	<title>职位名称招聘_最新职位名称招聘信息_职位名称招聘信息大全 -职位搜索 597人才网</title>
	<link rel="stylesheet" type="text/css" href="http://cdn.597.com/www/css/mapsearch.css?v=20130808" />
	<link rel="stylesheet" type="text/css" href="http://cdn.597.com/www/css/basefront.css?v=20130808" />
	<script language="javascript" type="text/javascript" src="http://cdn.597.com/www/js/jquery.js?v=20130808"></script>
	<script language="javascript" type="text/javascript" src="http://cdn.597.com/www/js/control.js?v=20130808"></script>
<style type="text/css">
/*--数据加载中样式--*/
.background { display: block; width: 100%; height: 100%; opacity: 0.4; filter: alpha(opacity=40); background:gray; position: absolute; top: 0; left: 0; z-index: 2000; } 
.progressBar { border: solid 2px #86A5AD; background: white url(progressBar_m.gif) no-repeat 10px 10px; } 
.progressBar { display: block; width: 148px; height: 28px; position: fixed; top: 50%; left: 50%; margin-left: -74px; margin-top: -14px; padding: 10px 10px 10px 50px; 
    text-align: left; line-height: 27px; font-weight: bold; position: absolute; z-index: 2001; }
/*--实时路况样式--*/    
.maplibTc{font-size:12px;width:243px;border:1px solid #8ba4d8;padding:3px 2px 0 5px;background:#fff;position:absolute}.maplibTc a{text-decoration:none}.maplibTcColor{background:url("http://map.baidu.com/img/tools_menu.gif") no-repeat scroll 138px -85px transparent;font-weight:bold;*background-position:128px -85px}.maplibTcUpdate{float:left;width:13px;height:14px;background:url(http://map.baidu.com/img/tools_menu.gif) no-repeat -12px -18px;margin-left:5px;cursor:pointer}.maplibTcView{float:right;color:#00f;text-decoration:none;line-height:15px;*line-height:18px}.maplibTcCurTime{float:left;color:#666}.maplibTcTime{height:20px;padding:5px 3px 0 0}.maplibTcWeekDay{height:22px;color:#6688ca;padding:3px 0}.maplibTcWeekDay a{color:#6688ca;padding:3px 2px}.maplibTcWeekDay ul{float:left;margin:0;padding:0}.maplibTcWeekDay span{float:left;line-height:23px}.maplibTcWeekDay li{float:left;padding:0 6px;list-style:none;line-height:23px}.maplibTcRule{background:url("http://map.baidu.com/img/bar.gif") no-repeat scroll 0 10px transparent;width:195px;float:left;margin-left:20px;*margin-left:10px}.maplibTcRuleTxt{float:left;line-height:44px}.maplibTcClear{clear:both}.maplibTcTimeBox{color:#6688ca;margin-left:137.5px;font-size:11px;overflow:hidden}.maplibTcTimeline{height:34px}.maplibTcTimelinePrev{overflow:hidden;width:9px;height:9px;cursor:pointer;float:left;margin-top:3px}.maplibTcTimelineNext{overflow:hidden;width:11px;*width:10px;height:9px;cursor:pointer;float:right;margin-top:3px}.maplibTcTimeMove{width:9px;height:18px;background:url("http://map.baidu.com/img/tools_menu.gif") no-repeat scroll 0 -32px transparent;float:left;cursor:pointer;margin-left:137.5px;margin-top:0}.maplibTcHide{display:none}.maplibTcBtn{background:url(http://map.baidu.com/img/bgs.gif) no-repeat scroll 0 -271px transparent;cursor:pointer;height:22px;width:73px;z-index:10;position:absolute}.maplibTcBtnOff{background-position:0 -249px}.maplibTcColon{float:left}.maplibTcOn{background:#e6eff8}.maplibTcClose{background:url("http://map.baidu.com/img/popup_close.gif") no-repeat scroll 0 0 transparent;border:0 none;cursor:pointer;height:12px;position:absolute;right:4px;top:5px;width:12px}
.cu{ font-size:12px;color:Black;  text-decoration:none;}
/*--end--*/
</style>
	<script type="text/javascript" src="http://api.map.baidu.com/api?v=1.2"></script>
<script type="text/javascript" language="javascript" src="/js/DistanceTool_min.js"></script>
<script type="text/javascript" language="javascript" src="/js/TrafficControl_min.js"></script>

</head>
<body>

<!--{template header}-->

<form id="mapSearchForm" action="/MapSearchResult.aspx">
<div class="content">
	<div class="crumbs">您的位置：<a href="/">首页</a>&gt;<span>地图搜索</span></div>
	<div class="jobSearch mSearch mSearchResultTop">
    	<div class="jobSearchT">
        	<h1>筛选条件</h1>
        </div>
    	<div class="teamLst">
            <div class="team">
                <div class="teamL">职位类别</div>
                <div class="teamR">
                    <span class="selBtn">
                        <a href="javascript:void(0)" id="btnFuntype"><b>不限</b></a>
                    </span>
                </div>
            </div>
            <div class="team">
                <div class="teamL">行业类别</div>
                <div class="teamR">
                    <span class="selBtn">
                        <a  href="javascript:void(0)" id="btnIndustry"><b>不限</b></a>
                    </span>
                </div>
            </div>
            <div class="team">
                <div class="teamL">其他福利</div>
                <div class="teamR">
                    <span class="selBtn">
                        <a href="javascript:void(0)" id="btnOtherReward"><b>不限</b></a>
                    </span>
                </div>
            </div>
            <div class="team oth4">
                <div class="teamL">地标</div>
                <div class="teamR">
                    <span class="verText"><input id="txtMapCenter" name="txtMapCenter" value="两路"  watermark="选择或输入地标" type="text" class="inputText" /></span><span class="verBtn"><a href="javascript:void(0)" id="btnMapCenter" name="btnMapCenter">选择地标</a></span>
                </div>
            </div>
            
            <div class="team payTeam">
                <div class="teamL">月薪范围</div>
                <div class="teamR">
                    <span class='verSelect' ><input type='hidden' id='sltSalary' name='sltSalary' value='00' /><span class='verSelectBg' onclick='toggleItemLi(this)'><span  style='width:100px;' class='verSelectTxt'>请选择</span></span><span  style='height:150px;overflow:auto;width:136px;overflow-y:scroll;height:120px' class='verSelectCon'><ul><li  class='cu'  onclick='chooseItem(this,false,mapsearchresult.sltSalaryOnChange);return false;'><a href='javascript:void(0);' title='请选择' theValue='00'>请选择</a></li><li   onclick='chooseItem(this,false,mapsearchresult.sltSalaryOnChange);return false;'><a href='javascript:void(0);' title='面议' theValue='99'>面议</a></li><li   onclick='chooseItem(this,false,mapsearchresult.sltSalaryOnChange);return false;'><a href='javascript:void(0);' title='1500以下' theValue='01'>1500以下</a></li><li   onclick='chooseItem(this,false,mapsearchresult.sltSalaryOnChange);return false;'><a href='javascript:void(0);' title='1501-2000' theValue='02'>1501-2000</a></li><li   onclick='chooseItem(this,false,mapsearchresult.sltSalaryOnChange);return false;'><a href='javascript:void(0);' title='2001-3000' theValue='03'>2001-3000</a></li><li   onclick='chooseItem(this,false,mapsearchresult.sltSalaryOnChange);return false;'><a href='javascript:void(0);' title='3001-4000' theValue='04'>3001-4000</a></li><li   onclick='chooseItem(this,false,mapsearchresult.sltSalaryOnChange);return false;'><a href='javascript:void(0);' title='4001-5000' theValue='05'>4001-5000</a></li><li   onclick='chooseItem(this,false,mapsearchresult.sltSalaryOnChange);return false;'><a href='javascript:void(0);' title='5001-6000' theValue='06'>5001-6000</a></li><li   onclick='chooseItem(this,false,mapsearchresult.sltSalaryOnChange);return false;'><a href='javascript:void(0);' title='6001-8000' theValue='07'>6001-8000</a></li><li   onclick='chooseItem(this,false,mapsearchresult.sltSalaryOnChange);return false;'><a href='javascript:void(0);' title='8001-10000' theValue='08'>8001-10000</a></li><li   onclick='chooseItem(this,false,mapsearchresult.sltSalaryOnChange);return false;'><a href='javascript:void(0);' title='10001-15000' theValue='09'>10001-15000</a></li><li   onclick='chooseItem(this,false,mapsearchresult.sltSalaryOnChange);return false;'><a href='javascript:void(0);' title='15000以上' theValue='10'>15000以上</a></li><li   onclick='chooseItem(this,false,mapsearchresult.sltSalaryOnChange);return false;'><a href='javascript:void(0);' title='自定义' theValue='100'>自定义</a></li></ul></span></span>
                    <div id="salaryContainer" style='display:none;'>
                        <span class="verText"><input type="text" id="txtSalaryMin" name="txtSalaryMin" class="inputText" style="width:45px;margin:0 0 0 10px;" maxlength="7" onkeyup="mapsearchresult.inputNumOnly(this, event, value)" onbeforepaste="clipboardData.setData('text',clipboardData.getData('text').replace(/[^\d]/g,''))" /></span>
                        <span class="verTxt">至</span>
                        <span class="verText"><input type="text" id="txtSalaryMax" name="txtSalaryMax" class="inputText" style="width:45px;margin:0 0 0 10px;" maxlength="7" onkeyup="mapsearchresult.inputNumOnly(this, event, value)" onbeforepaste="clipboardData.setData('text',clipboardData.getData('text').replace(/[^\d]/g,''))" /></span>
                    </div>
                    <span class="verCheckbox" style="display:none;">
                        <input class="checkBox" type="checkbox" id="chkSalary2" name="chkSalary2" value="0"/><label for="chkSalary2">包含面议</label>
                    </span>
                </div>
            </div>
            <div class="team oth3">
                <div class="teamL">关键字</div>
                <div class="teamR">
                    <span class="verText"><input id="txtMapSearchKeyWords" name="txtMapSearchKeyWords" type="text" watermark="公司名称/职位名称" class="inputText" value=""/></span>
                    <span class="verBtn"><a href="javascript:void(0)" id="btnSearch" class="btn11"><b class="L"></b><b class="R"></b>搜索</a></span>
                    <span class="verTxt"><a href="/JobSearch.aspx">转到职位搜索</a></span>
                    <span class="record" id="lastSearch">
                    	<a class="recordLink" href="javascript:void(0)">搜索记录</a>
                    </span>
                </div>
            </div>
            <div class="clear"></div>
        </div>
        <!--范围搜索begin-->
        <div class="slide-bar bd" id="container">
            <a id="slide-bar-cut" title="减少" class="slide-bar-act slide-cut" href="javascript:void(0)"></a>
            <a id="slide-bar-add" title="增加" class="slide-bar-act slide-add" href="javascript:void(0)"></a>
            <div id="js-slider" class="ui-slider ui-slider-horizontal ui-widget ui-widget-content ui-corner-all">
                <a href="javascript:void(0)" class="ui-slider-handle ui-state-default ui-corner-all" id="moveElem"></a>
            </div>
            <ol role="presentation" class="ui-slider-scale ui-helper-reset ui-slider-tool" id="presentation"></ol>
        </div>
        <input type="hidden" id="hidSearchBound" name="hidSearchBound" value="1" />
        <!--范围搜索end-->
        <div class="condition">
        	<dl><dt>您选择的条件是:</dt><dd id="ShowSearchCondition"></dd></dl>
        </div>
    </div>
    <div class="map">
        <div class="ranging">
            <a name="map_top" href="javascript:void(0)" onclick="myDis.open()" title=""></a>
        </div>
        <div id="baiduMapContainer" style="width:100%;height:500px; text-align:center; vertical-align:middle;">地图正在加载中,请稍候...</div>
    </div>
    <div class="searchResult mSearchResult">
    	<div class="tableT">
        	<div class="tableTL"><a href="javascript:void(0)" onclick="mapsearchresult.jobOperate._sortfiled(this)"  val='issuetime'>发布时间</a><a onclick="mapsearchresult.jobOperate._sortfiled(this)" val="reward" href="javascript:void(0)">福利指数</a><a onclick="mapsearchresult.jobOperate._sortfiled(this)" val="salary" href="javascript:void(0)">薪资</a></div>
            <div class="tableTC">共有<span class="orange" id="pageCount"></span>个职位&nbsp;&nbsp;&nbsp;&nbsp;<span id="divStationAvgSalary" style="display:none;">该职位的平均薪酬：<span class="orange" id="stationAvgSalary">3455</span>元&nbsp;&nbsp;&nbsp;&nbsp;</span></div>
            <div class="tableTR">
                <div id="ctl00_content_pager">每页显示<a href="javascript:void(0)" id="__pageSizeTen">10</a><a href="javascript:void(0)" id="__pageSizeTwenty">20</a><a href="javascript:void(0)" id="__pageSizeThirty">30</a></div>

  <script type="text/javascript">
	  $.pager.add(
	  {
	  id:'pager',
	  container:'ctl00_content_pager',
	  relatedPager:'pager2',
	  isSlave:false,
	  slaveOnly:false,
	  pageIndex:1,
	  pageSize:20,
	  validate:'',
	  prepare:'$.pager.prepare',
	  preRender:'$.pager.preRender',
	  renderData:'rendData',
	  dataUrl:'',
	  queryForm:'btnSearch',
	  pagerMode:true,
	  bindTrHover:false,
	  firstData:undefined,
	  isNeedPager:'False'
	  });
  </script>
            </div>
            <div class="clear"></div>
        </div>
        <div class="table">
            <div class="tHead">
                <div class="lstCon lst1">招聘职位</div>
                <div class="lstCon lst2">单位名称</div>
                <div class="lstCon lst3">工作区域</div>
                <div class="lstCon lst4">薪资待遇</div>
                <div class="lstCon lst5">发布时间</div>
                <div class="clear"></div>
            </div>
            <div class="tBody">
                <ul id="tdyContent">
                    <li style="display:none">
                        <div class="btns"><a href="javascript:void(0)" class="xq">查看详情</a><a href="javascript:void(0)" class="shc">收藏职位</a></div>
                        <div class="tLst">
                            <div class="lstCon lst1"></div>
                            <div class="lstCon lst7"></div>
                            <div class="lstCon lst2"></div>
                            <div class="lstCon lst3"></div>
                            <div class="lstCon lst4"></div>
                            <div class="lstCon lst5"></div>
                            <div class="lstCon lst6"></div>
                            <div class="clear"></div>
                        </div>
                        <div class="tParameter">
                    	    <div class="lst lst1"><b>学历要求：</b><i></i></div>
                            <div class="lst lst2"><b>工作经验：</b><i></i></div>
                            <div class="lst lst3"><b>招聘人数：</b><i></i></div>
                            <div class="lst lst4"><b>年龄范围：</b><i></i></div>
                            <div class="lst lst5"><b>工作性质：</b><i></i></div>
                            <div id="theReward"  class="lst lst6">
                            </div>
                            <div class="clear"></div>
                        </div>
                        <div class="tBot">
                            <div class="tBotL">岗位职责：</div>
                            <div class="tBotR"></div>
                            <div class="clear"></div>
                        </div>
                    </li>
                </ul>
            </div>
            <div class="tFoot">
                <div class="tFootL">
                    <div class="checkVessel"><input type="checkbox" class="checkBox" id="chkDownJobID" /><label>全选</label></div>
                    <div class="tFootBtns"><a href="javascript:void(0)" id="hlkFav" name="hlkFav"  class="btn1"><b class="L"></b><b class="R"></b>收藏</a></div>
                    <div class="clear"></div>
                </div>
                <div class="tFootR">
                </div>
                <div class="clear"></div>
            </div>
            <span id="ctl00_content_pager2"><div class="page"><!--currentPage--><a href="javascript:void(0);" id="__previousPage" title="上一页">&lt;</a><span id="__pageSelect"></span><a href="javascript:void(0);" id="__nextPage" title="下一页">&gt;</a></div></span>
        </div>
    </div>
</div>
 <!--中心位置-->
 <div id="areaLayer" style="display:none;z-index:9999;position:absolute;width:610px;" ></div>
 <div id="buildLayer" class="buildLayer" style="display:none;z-index:99999;position:absolute;" ></div>
 <!--存储坐标-->
 <input type="hidden" id="hidMapX" name="hidMapX" />
 <input type="hidden" id="hidMapY" name="hidMapY" />
 <!--排序，显示更多结果-->
 <input type="hidden" name="hddSortname" id="hddSortname" value="" />
 <!--url处理-->
 <input type="hidden" id="hidUrlEncodeKeyword" name="hidUrlEncodeKeyword" />
 <!--数据加载中-->
 <div id="background" class="background" style="display: none; "></div> 
 <div id="progressBar" class="progressBar" style="display: none; ">地标解析中，请稍等...</div>
<!--现场招聘会信息-->
<div id ="fairJob" class="fairTip none">
 <div class="fairTipC">
        <div id="fairinfo" class="fairTipTxt">
            该单位已参加了人才网<br/>
            <label id="lblbatchinfo" title="2014-01-18 08:30~12:00 “职场星期六”超大型人才交流会">
              2014-01-18 08:30~12:00 “职场星期六”超大...<br>
            </label>
            <a target="_blank"  href="/zhaopinhui/20140118">查看大会详情</a> 
            <label id="fairinfos">
              <a href="javascript:void(0)" onclick="mapsearchresult.jobOperate._fairBooking()">预约招聘职位</a>  <a href="javascript:void(0)" target="_blank" onclick="mapsearchresult.jobOperate._lookFairStation(this)">查看职位</a>
            </label>
            <label style="display:none" id="fairBook"></label>
            <label style="display:none" id="jobUrlRewrite"></label>
            <label style="display:none" id="batchID"></label>
        </div>
  </div>
</div>
</form>



<!--{template footer}-->
<script type="text/javascript">
    /*
    * The author of the following code:Zhang Yu
    * Date: 2012-03
    */
    function UClass() { }
    UClass.hasClass = function(elem, className) {
        if (!elem)
            return;
        var elemClassName = elem.className;
        if (elemClassName.length == 0)
            return false;
        //用正则表达式判断多个class之间是否存在真正的class（前后空格的处理）
        if (elemClassName == className || elemClassName.match(new RegExp("(^|\\s)" + className + "(\\s|$)")))
            return true;
        return false;
    }
    UClass.addClass = function(elem, className) {
        if (!elem)
            return;
        var elemClassName = elem.className;
        if (elemClassName.length == 0) {
            elem.className = elemClassName;
            return;
        }
        if (elemClassName == className || elemClassName.match(new RegExp("(^|\\s)" + className + "(\\s|$)")))
            return;
        elem.className = elemClassName + " " + className;
    }
    UClass.removeClass = function(elem, className) {
        if (!elem)
            return;
        var elemClassName = elem.className;
        if (elemClassName.length == 0)
            return;
        if (elemClassName == className) {
            elem.className = "";
            return;
        }
        if (elemClassName.match(new RegExp("(^|\\s)" + className + "(\\s|$)")))
            elem.className = elemClassName.replace((new RegExp("(^|\\s)" + className + "(\\s|$)")), " ");
    }
    //-------------------------------------
    //判断样式className、增加class、删除class
    //----------------end------------------
    var getId = function(id) {
        return "string" == typeof id ? document.getElementById(id) : id;
    };
    function addEventHandler(oTarget, sEventType, fnHandler) {
        if (oTarget.addEventListener) {
            oTarget.addEventListener(sEventType, fnHandler, false);
        } else if (oTarget.attachEvent) {
            oTarget.attachEvent("on" + sEventType, fnHandler);
        } else {
            oTarget["on" + sEventType] = fnHandler;
        }
    };
    var Class = {
        create: function() {
            return function() {
                this.initialize.apply(this, arguments);
            }
        }
    };
    Function.prototype.bind = function(object) {
        var method = this;
        return function() {
            method.apply(object, arguments);
        }
    };
    Object.extend = function(destination, source) {
        for (var property in source) {
            destination[property] = source[property];
        }
        return destination;
    };
    // t:表示时间,b:初始位置， c:距离，d:经过时间
    var Tween = {
        Quart: {
            easeOut: function(t, b, c, d) {
                return -c * ((t = t / d - 1) * t * t * t - 1) + b;
            }
        },
        Back: {
            easeOut: function(t, b, c, d, s) {
                if (s == undefined)
                    s = 1.70158;
                return c * ((t = t / d - 1) * t * ((s + 1) * t + s) + 1) + b;
            }
        },
        Bounce: {
            easeOut: function(t, b, c, d) {
                if ((t /= d) < (1 / 2.75)) {
                    return c * (7.5625 * t * t) + b;
                } else if (t < (2 / 2.75)) {
                    return c * (7.5625 * (t -= (1.5 / 2.75)) * t + .75) + b;
                } else if (t < (2.5 / 2.75)) {
                    return c * (7.5625 * (t -= (2.25 / 2.75)) * t + .9375) + b;
                } else {
                    return c * (7.5625 * (t -= (2.625 / 2.75)) * t + .984375) + b;
                }
            }
        }
    }
    var Common = {
        // 判断浏览器
        w3c: (document.getElementById) ? true : false,
        agt: navigator.userAgent.toLowerCase(),
        ie: function() {
            return ((Common.agt.indexOf("msie") != -1) && (Common.agt.indexOf("opera") == -1) && (Common.agt.indexOf("omniweb") == -1))
        },
        ie5: function() {
            return (Common.w3c && Common.ie) ? true : false
        },
        ns6: function() {
            return (Common.w3c && (navigator.appName == "Netscape")) ? true : false
        },
        op8: (navigator.userAgent.toLowerCase().indexOf("opera") == -1) ? false : true,
        // 获取元素的左边距
        getXYWH: function(o) {
            var nLt = 0;
            var nTp = 0;
            var offsetParent = o;
            while (offsetParent != null && offsetParent != document.body) {
                nLt += offsetParent.offsetLeft;
                nTp += offsetParent.offsetTop;
                if (!Common.ns6) {
                    parseInt(offsetParent.currentStyle.borderLeftWidth) > 0 ? nLt += parseInt(offsetParent.currentStyle.borderLeftWidth) : "";
                    parseInt(offsetParent.currentStyle.borderTopWidth) > 0 ? nTp += parseInt(offsetParent.currentStyle.borderTopWidth) : "";
                }
                offsetParent = offsetParent.offsetParent;
            }
            return {
                offsetLeft: nLt,
                offsetTop: nTp
            };
        },
        setStyleAttribute: function(element, attrvalue) {
            if (! +"\v1") {
                //use the .cssText hack
                element.style.setAttribute('cssText', attrvalue);
            } else {
                //use the correct DOM Method
                element.setAttribute("style", attrvalue);
            }

        }
    }
    /*
    * 外面大容器， 左右按钮，移动元素，标记容器，标记数组[内容]， 样式(可操作样式,不能操作样式，移动元素的默认位置)
    * 1：根据标记的数量，在标记容器里添加标记，并控制标记之间的距离，并为每个标记标记事件：点击标记是，将移动元素标记到标记之上
    * 2: 为左右按钮绑定事件: 当点击左移动时,向左移动一个标记的位置,如果移动的位置是最后一个标记,取消左移动的事件,并将元素的样式改为不能操作;
    */
    var scroll = Class.create();
    scroll.prototype = {
        initialize: function(container, leftBtn, rightBtn, moveElm, signContainer, signs, hidid, options) {
            var self = this;
            this.container = getId(container);
            this.leftBtn = getId(leftBtn);
            this.rightBtn = getId(rightBtn);
            this.moveElm = getId(moveElm);
            this.hid = getId(hidid);
            this.signContainer = getId(signContainer);
            this.setOptions(options);
            this.leftAct = this.options.leftAct;
            this.leftEnd = this.options.leftEnd;
            this.rightAct = this.options.rightAct;
            this.rightEnd = this.options.rightEnd;
            this.currentsigncoordinate = this.options.currentsigncoordinate;
            this.currentvalue = this.options.currentvalue;
            this.duration = this.options.duration;
            this.time = this.options.time;
            this.Tween = this.options.Tween;
            this.len = signs.length;
            this.signs = signs;
            this._timer = null;

            this.moveElmParentElmleft = Common.getXYWH(this.moveElm.parentNode).offsetLeft;
            this.moveElmContainerWidth = this.moveElm.parentNode.offsetWidth;
            if (this.len <= 0)
                return;
            this.everywidth = this.moveElmContainerWidth / (this.len - 1);
            var j = "";
            for (var i = 1; i <= this.len; i++) {
                var element = document.createElement("li");
                element.innerHTML = "<span class=\"ui-slider-label ui-slider-label-show\">" + signs[i - 1].lable + "</span><span class=\"ui-slider-tic ui-widget-content\"></span>";
                if (i == this.len) {
                    j = this.moveElmContainerWidth;
                } else {
                    j = (this.everywidth * (i - 1));
                }
                Common.setStyleAttribute(element, "left:" + j + "px");
                this.signContainer.appendChild(element);
                addEventHandler(element, "click", (function(i) {
                    return function() {
                        self.run(i)
                    }
                })(i));
                if (this.currentvalue !== null && signs[i - 1].value === this.currentvalue) {
                    this.currentsigncoordinate = i;
                }
            };
            Common.setStyleAttribute(this.moveElm, "left:" + (this.currentsigncoordinate - 1) * this.everywidth + "px");
            addEventHandler(this.moveElm.parentNode, "click", function(event) {
                self.randomMove(event)
            });
            addEventHandler(this.leftBtn, "click", function() {
                self.moveLeft();
            });
            addEventHandler(this.rightBtn, "click", function() {
                self.moveRight();
            });
        },
        getLabel: function(value) {
            var lable = null;
            var signs = this.signs;
            for (var i = 1; i <= this.len; i++) {
                if (value !== null && signs[i - 1].value === value) {
                    lable = signs[i - 1].lable;
                    break;
                }
            }
            return lable;
        },
        moveValue: function(value) {
            var signs = this.signs;
            for (var i = 1; i <= this.len; i++) {
                if (value !== null && signs[i - 1].value === value) {
                    this.currentsigncoordinate = i;
                    break;
                }
            }
            this.run(this.currentsigncoordinate);
        },
        setOptions: function(options) {
            this.options = {
                leftAct: "leftAct",
                leftEnd: "leftEnd",
                rightAct: "rightAct",
                rightEnd: "rightEnd",
                duration: 100,    //滑动持续时间
                time: 5,    //滑动延时
                currentsigncoordinate: 1,
                currentvalue: null,
                Tween: Tween.Quart.easeOut //tween算子
            };
            Object.extend(this.options, options || {});
        },
        run: function(i) {
            if (i < 1) {
                i = 1;
            }
            if (i > this.len) {
                i = this.len;
            }
            this.currentsigncoordinate = i;
            // t:表示时间,b:初始位置， c:距离，d:经过时间
            this._target = this.everywidth * (i - 1);
            this._t = 0;
            var _b = parseInt(this.moveElm.style.left);
            this._b = isNaN(_b) ? 0 : _b;
            this._c = this._target - this._b;
            this.move(i);

        },
        move: function(i) {
            clearTimeout(this._timer);
            if (this._c && this._t < this.duration) {
                var style = "left:" + Math.round(this.Tween(this._t++, this._b, this._c, this.duration)) + "px";
                Common.setStyleAttribute(this.moveElm, style);
                this._timer = setTimeout(function() { this.move(i); } .bind(this), this.time);
            } else {
                if (! +"\v1") {
                    //use the .cssText hack
                    this.moveElm.style.setAttribute('cssText', "left:" + Math.round(this.Tween(this._t++, this._b, this._c, this.duration)) + "px");
                } else {
                    //use the correct DOM Method
                    this.moveElm.setAttribute("style", "left:" + Math.round(this.Tween(this._t++, this._b, this._c, this.duration)) + "px");
                }
            }
            this.hid.setAttribute("value", this.signs[i - 1].value);
        },
        moveLeft: function() {
            this.currentsigncoordinate -= 1;
            this.run(this.currentsigncoordinate);
        },
        moveRight: function() {
            this.currentsigncoordinate += 1;
            this.run(this.currentsigncoordinate);
        },
        randomMove: function(event) {
            var e = window.event || event;
            var x = e.clientX || e.pageX;
            var moveleft = this.moveElmParentElmleft;
            //获取与x最近的坐标
            var everywidth = this.moveElmContainerWidth / this.len;
            var i = (x - moveleft) % everywidth;
            var j = parseInt((x - moveleft) / everywidth);
            if (i > (everywidth / 2)) {
                j += 1
            } else {
                if (0 < j && j < (this.len - 1)) {
                    j += 1;
                };
            }
            if (j <= 0) {
                j = 1;
            }
            this.run(j);
        }
    };
</script>
<script type="text/javascript">
var mapsearchresult={
    _searchBound:null,_areaBuild:null,_salary:null,
    _searchBoundNum:null,_searchScope:null,
    initialize:function(){
        mapsearchresult._searchBound= { "i1": "周围1公里", "i3": "周围3公里", "i5": "周围5公里" };
        mapsearchresult._areaBuild=[{"id":"0301","name":"渝中区","subBuild":[{"name":"解放碑"},{"name":"七星岗"},{"name":"较场口"},{"name":"朝天门"},{"name":"望龙门"},{"name":"南纪门"},{"name":"菜园坝"},{"name":"两路口"},{"name":"王家坡"},{"name":"上清寺"},{"name":"大溪沟"},{"name":"大坪"},{"name":"化龙桥"},{"name":"观音岩"}]},{"id":"0302","name":"江北区","subBuild":[{"name":"华新街"},{"name":"石马河"},{"name":"大石坝"},{"name":"观音桥"},{"name":"五里店"},{"name":"寸滩"},{"name":"江北城"},{"name":"郭家沱"},{"name":"红旗河沟"},{"name":"南桥寺"},{"name":"黄泥磅"}]},{"id":"0303","name":"九龙坡","subBuild":[{"name":"杨家坪"},{"name":"谢家湾"},{"name":"石坪桥"},{"name":"黄桷坪"},{"name":"中梁山"},{"name":"石桥铺"},{"name":"二郎"}]},{"id":"0304","name":"沙坪坝","subBuild":[{"name":"沙坪坝"},{"name":"小龙坎"},{"name":"磁器口"},{"name":"井口"},{"name":"詹家溪"},{"name":"石井坡"},{"name":"童家桥"},{"name":"渝碚路"},{"name":"汉渝路"},{"name":"天星桥"},{"name":"土湾"},{"name":"新桥"},{"name":"山洞"},{"name":"歌乐山"},{"name":"大学城"}]},{"id":"0305","name":"南岸区","subBuild":[{"name":"南坪"},{"name":"龙门浩"},{"name":"海棠溪"},{"name":"玄坛庙"},{"name":"弹子石"},{"name":"南滨路"},{"name":"铜元局"},{"name":"回龙湾"},{"name":"四公里"},{"name":"茶园新区"},{"name":"学府大道"}]},{"id":"0306","name":"大渡口区","subBuild":[{"name":"九宫庙"},{"name":"马王乡"},{"name":"新山村"}]},{"id":"0307","name":"渝北区","subBuild":[{"name":"两路"},{"name":"回兴"},{"name":"沙坪"},{"name":"石坪"},{"name":"龙溪"},{"name":"人和"},{"name":"木耳"},{"name":"大竹林"},{"name":"礼嘉"},{"name":"鸳鸯"},{"name":"王家"},{"name":"兴隆"},{"name":"茨竹"},{"name":"大湾"},{"name":"中河"},{"name":"龙兴"},{"name":"洛碛"},{"name":"石船"},{"name":"统景"},{"name":"麻柳沱"},{"name":"大盛"},{"name":"龙头寺"},{"name":"新牌坊"},{"name":"汽博中心"},{"name":"冉家坝"},{"name":"农业园区"},{"name":"空港新城"},{"name":"一碗水"}]},{"id":"0308","name":"巴南区","subBuild":[{"name":"界石"},{"name":"鱼洞"},{"name":"李家沱"},{"name":"南泉"},{"name":"一品"}]},{"id":"0309","name":"北碚区","subBuild":[{"name":"朝阳"},{"name":"北温泉"},{"name":"龙凤桥"},{"name":"童家溪"}]},{"id":"0399","name":"其它","subBuild":[{"name":"万州"},{"name":"黔江"},{"name":"涪陵"},{"name":"长寿"},{"name":"合川"},{"name":"万盛"},{"name":"永川"},{"name":"双桥"},{"name":"江津"},{"name":"大足"},{"name":"云阳"},{"name":"巫山"},{"name":"奉节"},{"name":"酉阳"},{"name":"秀山"},{"name":"丰都"},{"name":"垫江"},{"name":"彭水"},{"name":"荣昌"},{"name":"綦江"},{"name":"璧山"},{"name":"开县"},{"name":"铜梁"},{"name":"潼南"},{"name":"城口"},{"name":"梁平"},{"name":"南川"},{"name":"巫溪"},{"name":"忠县"},{"name":"武隆"}]}];
        mapsearchresult._salary={'s01':'1500以下','s02':'1501-2000','s03':'2001-3000','s04':'3001-4000','s05':'4001-5000','s06':'5001-6000','s07':'6001-8000','s08':'8001-10000','s09':'10001-15000','s10':'15000以上' };
        mapsearchresult._searchBoundNum='1';
        mapsearchresult._searchScope= new scroll("container", "slide-bar-cut", "slide-bar-add", "moveElem", "presentation", [{lable: "1公里",value: "1"}, {lable: "3公里",value: "3"}, { lable: "5公里",value: "5"}], "hidSearchBound", { currentvalue: mapsearchresult._searchBoundNum });
        mapsearchresult._initContorl();
        mapsearchresult.centerPointChoose.initialize();
        mapsearchresult.enforceMapSearch.initialize();
        mapsearchresult.jobOperate.initialize();
    },
    inputNumOnly:function(o, e, v)
    {
        if(e.keyCode < 37 || e.keyCode > 40)
        {
            $(o).val(v.replace(/[^\d]/g,''));
        }
    },
    _initContorl:function(){
        //绑定checkbox全选事件
        $('#chkDownJobID').bindCheckBox('jobID');
        //期望行业
        $('#btnIndustry').bindCalling({ max: 5, multi: true, inputName: 'calling', selectTo: '',noLimit: true, onChanged: function(data) {
            var html = '';
            for (var i in data) {
                html += getCallingName(data[i]) + '+';
            }
            if (html.length > 1) {
                html = html.substring(0, html.length - 1);
                $('#btnIndustry').attr('title', html);
            }
            else {
                $('#btnIndustry').attr('title', '');
            }
            if (html.length > 10) {
                html = html.substring(0, 10) + '...';
            }
            if (html.length > 0) {
                html = '<b>' + html + '</b>';
                $('#btnIndustry').html(html);
            }
            else {
                $('#btnIndustry').html('<b>不限</b>');
            }
        }
        });
        
        $('#chkSalary2').click(function(){
            var _self=$(this);
            if(_self.is(":checked")){
                _self.val("1");
            }else{
                _self.val("0");
            }
        });
        $('#txtSalaryHigh,#txtSalaryLower').bind('paste', function() {
            var tmptxt = $(this).val();
            $(this).val(tmptxt.replace(/\D/g, ''));
         }).bind('keyup',function(){
             var tmptxt = $(this).val();
            $(this).val(tmptxt.replace(/\D/g, ''));
         });

        //职位类别
        $('#btnFuntype').bindJobsort({ max: 5, multi: true, inputName: 'jobsort', selectTo: '',noLimit: true, onChanged: function(data) {
            var html = '';
            for (var i in data) {
                html += getJobsortName(data[i]) + '+';
            }
            if (html.length > 1) {
                html = html.substring(0, html.length - 1);
                $('#btnFuntype').attr('title', html);
            }
            else {
                $('#btnFuntype').attr('title', '');
            }
            if (html.length > 10) {
                html = html.substring(0, 10) + '...';
            }
            if (html.length > 0) {
                html = '<b>' + html + '</b>';
                $('#btnFuntype').html(html);
            }
            else {
                $('#btnFuntype').html('<b>不限</b>');
            }
        }
        });
        //其他福利
        $('#btnOtherReward').bindOtherReward({ max: 5, multi: true, inputName: 'otherReward', selectTo: '',noLimit: true, onChanged: function(data) {
            var html = '';
            for (var i in data) {
                html += getOtherRewardName(data[i]) + '+';
            }
            if (html.length > 1) {
                html = html.substring(0, html.length - 1);
                $('#btnOtherReward').attr('title', html);
            } else {
                $('#btnOtherReward').attr('title', '');
            }
            if (html.length > 10) {
                html = html.substring(0, 10) + '...';
            }
            if (html.length > 0) {
                html = '<b>' + html + '</b>';
                $('#btnOtherReward').html(html);
            } else {
                $('#btnOtherReward').html('<b>不限</b>');
            }
        }
        }); 
    },
    sltSalaryOnChange:function(v){
//         if(v=='00'){
//            $('#txtSalaryLower').val("");
//            $('#txtSalaryHigh').val("");
//            $('#salaryContainer').hide();
//          }
//          else
//          {       
//            $.getJSON('/MapSearch.aspx',{'operate':'GetSalaryMin','salaryID':v},function(json){
//                  if(json && json.error){
//                      $.anchorMsg('参数错误请重新选择！', { icon: 'warning' });
//                      return;
//                  }   
//                  $('#txtSalaryLower').val(json.salaryLower);
//                  $('#txtSalaryHigh').val("");
//                  $('#salaryContainer').show();
//            });
//        }
            if (v == 00 || v == 99)
            {
                $('#txtSalaryMin').val("");
                $('#txtSalaryMax').val("");
                $('#salaryContainer').hide();
            }
            else if (v == 100)
            {
                $('#txtSalaryMin').val("");
                $('#txtSalaryMax').val("");
                $('#salaryContainer').show();
            }
            else
            {
                $.getJSON('/MapSearch.aspx', { 'operate': 'GetSalaryMin', 'salaryID': v }, function(json)
                {
                    if (json && json.error)
                    {
                        $.anchorMsg('参数错误请重新选择！', { icon: 'warning' });
                        return;
                    }
                    $('#txtSalaryMin').val(json.salaryLower);
                    $('#txtSalaryMax').val(json.salaryMax);
                    $('#salaryContainer').hide();

                });
            }
    },
    centerPointChoose:{
        initialize:function(){
           //选择中心地标
            $('#btnMapCenter').click(function() {
                var div_magin_top = (window.screen.availHeight - 300) / 2 + document.documentElement.scrollTop + document.body.scrollTop + "px";
                var div_magin_left = (document.body.clientWidth - $('#areaLayer').width()) / 2 + "px";
                var containerHtml = '<div class="choice choiceMap">'
										+'<div class="choiceCon">'
											+'<div class="choiceContent">'
												+'<div class="choiceTit">'
													+'<h3>中心地标选择</h3>'
													+'<div class="choice_close">'
														+'<a href="javascript:void(0)" onclick="mapsearchresult.centerPointChoose._closeAreaLayer()" id="_btnClose" class="choiceClose"></a>'
													+'</div>'
												+'</div>';
                var areaBuild =mapsearchresult._areaBuild;
                var areaHtml = '<div class="choiceLst">'
                                        +'<ul>';
                for (var item in areaBuild) {
                    var areaName = '<li onclick="mapsearchresult.centerPointChoose._getBuildByAreaID(this,\'' + areaBuild[item].id + '\',\'' + areaBuild[item].name + '\')" onmouseover="mapsearchresult.centerPointChoose._objMouseOver(this)" onmouseout="mapsearchresult.centerPointChoose._objMouseOut(this)">';
                    if (item) {
                        areaName += areaBuild[item].name;
                    }
                    areaName += "</li>";
                    areaHtml += areaName;
                }
                areaHtml += '</ul>'
									+'<div class="clear"></div>'
							+'</div>'
						+'</div>'
					+'</div>';
                containerHtml += areaHtml;
                $('#areaLayer').append(containerHtml).css({ left: div_magin_left, top: div_magin_top }).show();
                //创建覆盖层
                mapsearchresult.centerPointChoose._createBackground();
            });
            //关闭地标2级层
            $("#buildLayer").mouseout(function(event) {
                var reltg = $(event.relatedTarget);
                if (reltg.closest('#buildLayer').length <= 0) {
                    $(this).hide();
                }
            });
        },
         _createBackground:function(){
            var isIe = (document.all) ? true : false;
            var bWidth = parseInt(window.screen.width)-20;
            var bHeight = parseInt(document.documentElement.scrollHeight);
            var back = document.createElement("div");
            back.id = "back";
            back.className = "dialogMask";
            var styleStr = 'top:0px;left:0px;position:absolute;display: block;z-index:1001;width:' + bWidth + 'px;height:' + bHeight + 'px;';
            styleStr += (isIe) ? "filter:alpha(opacity=0);" : "opacity:0;";
            back.style.cssText = styleStr;
            document.body.appendChild(back);
            $(back).animate({ opacity: 0.5 }, 500);
        },
        _closeAreaLayer:function(){
            //关闭父层
            $('#areaLayer').empty();
            $('#areaLayer').hide();
            //关闭遮罩层
            $('#back').animate({ opacity: 0 }, { complete: function() { $('#back').remove(); } });
            //关闭子层
            $('#buildLayer').empty();
            $('#buildLayer').hide();
        },
        _closeBuildLayer:function(){
            $('#buildLayer').empty();
            $('#buildLayer').hide();
        },
        _objMouseOver:function(obj) {
            $(obj).addClass('hov');
        },
        _objMouseOut:function(obj) {
            $(obj).removeClass('hov');
        },
        _setContentBySelect:function(name) {
            if (name != "" && name.length != 0) {
                $('#txtMapCenter').val(name);
                $('#txtMapCenter').removeClass('inputGray');
                mapsearchresult.centerPointChoose._closeAreaLayer();
            }
        },
        _getBuildByAreaID:function(obj, id, name) 
        {
            var k = 0;
            $('#buildLayer').empty();
            //获取1级层的top
            var div_magin_top = $('#areaLayer').offset().top;
            //获取层得left
            var div_magin_left = (document.body.clientWidth - $('#areaLayer').width()) / 2;
            //获取当前选项相对于该层的位置
            var offset = $(obj).position();
            //获取数组
            var areaBuild =mapsearchresult._areaBuild;
            var containerHtml = '<div class="choiceLst"><div class="choiceLstLower"><ul><li class="choiceLstLowerTit"><h6>' + name + '</h6></li>';
            for (var i in areaBuild) {
                if (areaBuild[i].id == id) {
                    var js = areaBuild[i].subBuild;
                    for (var j in js) {
                        if (j) 
                        {
                            if (js[j].name.length > 6) 
                            {
                                containerHtml += '<li onmouseover="mapsearchresult.centerPointChoose._objMouseOver(this)" onmouseout="mapsearchresult.centerPointChoose._objMouseOut(this)" onclick="mapsearchresult.centerPointChoose._setContentBySelect(\'' + js[j].name + '\')" title="' + js[j].name + '">' + js[j].name.substring(0, 6) + '..</li>';
                            } 
                            else 
                            {
                                containerHtml += '<li onmouseover="mapsearchresult.centerPointChoose._objMouseOver(this)" onmouseout="mapsearchresult.centerPointChoose._objMouseOut(this)" onclick="mapsearchresult.centerPointChoose._setContentBySelect(\'' + js[j].name + '\')">' + js[j].name + '</li>';
                            }
                            k = k + 1;
                        }
                        
                    }
                }
            }
            containerHtml += '</ul><div class="clear"></div></div></div>';
            $('#buildLayer').append(containerHtml);
            //根据个数设置宽度
            switch (k) {
                case 1:
                    $('#buildLayer').css({ width: '111px' });break;
                case 2:
                    $('#buildLayer').css({ width: '220px' });break;
                case 3:
                    $('#buildLayer').css({ width: '330px' });break;
                case 4:
                    $('#buildLayer').css({ width: '438px' });break;
                default:
                    $('#buildLayer').css({ width: '438px' });break;
            }
            var temp_width = div_magin_left + ($('#areaLayer').width() - offset.left - 10);
            //溢出的部分
            var overflow_width = $('#buildLayer').width() - temp_width + 5;
            //溢出之后重设left
            if ($('#buildLayer').width() > temp_width) 
            {
                $('#buildLayer').css({ left: div_magin_left + offset.left + 10 - overflow_width, top: div_magin_top + offset.top}).show();
            }
            else
            {
                $('#buildLayer').css({ left: div_magin_left + offset.left + 10, top: div_magin_top + offset.top }).show();
            }
        }
    },
    enforceMapSearch:{
        mapSearchJson:null,
        ajaxbg:$("#background,#progressBar"),
        initialize:function(){
            $('#hidMapX').val('');
            $('#hidMapY').val('');
            mapsearchresult.enforceMapSearch._initContorl();
            mapsearchresult.enforceMapSearch._loadMapSearch(); 
        },
        _initContorl:function(){
            // 点击搜索按钮时，保存搜索条件
            $("#btnSearch").click(function() {
                var mapCenterValue=$('#txtMapCenter').val();
                if ( mapCenterValue== "" || mapCenterValue.length == 0 || mapCenterValue == "选择或输入地标") {
                    $.anchorMsg('请选择或输入中心地标！', { icon: 'warning' });
                    $('#txtMapCenter').focus();
                    return;
                }
                //查找是否存在大厦名
                $.getJSON('/MapSearch.aspx', { 'operate': 'GetBuildByName', 'buildName': $('#txtMapCenter').val() }, function(json) {
                    if (json.error && json) {
                        $.anchorMsg(json.error, { icon: 'warning' });
                        return;
                    }
                    //未找到
                    if (json.notFind) {
                        mapsearchresult.enforceMapSearch.ajaxbg.show();
                        mapsearchresult.enforceMapSearch._geocoder();
                    } else {
                        $('#hidMapX').val(json.mapx);
                        $('#hidMapY').val(json.mapy);
                        mapsearchresult.enforceMapSearch._geocoderSuccess();
                    }
                });
                showSearchCondition();
            });
            //搜索记录
            $('#lastSearch').mouseover(function(){
                var _self=$(this);
                if(_self.find('.recordCon').html()!=""){
                    $(this).addClass('recordHov');
                }
            }).mouseout(function(){
                $(this).removeClass('recordHov');
            });
        },
        _geocoder:function(event) {
            var txtContent = $('#txtMapCenter').val();
            // 创建地址解析器实例
            var myGeo = new BMap.Geocoder();
            // 解析地址
            myGeo.getPoint(txtContent, function(point) {
                if (point) {
                    $('#hidMapX').val(point.lat);
                    $('#hidMapY').val(point.lng);
                    //解析成功后执行添加操作
                    $.getJSON('/MapSearch.aspx', { "operate": "AddBuild", "mapx": $('#hidMapX').val(), "mapy": $('#hidMapY').val(), "buildName": txtContent }, function(json) {
                        if (json.error) {
                            $.anchorMsg('解析操作失败！', { icon: 'warning' });
                            return;
                        } else {
                            mapsearchresult.enforceMapSearch._geocoderSuccess();
                        }
                    });
                } else {
                    mapsearchresult.enforceMapSearch.ajaxbg.hide();
                    $.anchorMsg('没有查找到你查找的中心地标，请重新定位！', { icon: 'warning' });
                    $('#txtMapCenter').select();
                }
            }, "重庆市");
        },
        _geocoderSuccess:function() {
            var mapSearch = mapsearchresult.enforceMapSearch._buildMapSearch();
            var newMapSearch = mapSearch;
            var newMapSearchDisplay =mapsearchresult.enforceMapSearch._jsonToDisplay(eval('(' + newMapSearch + ')'));
            if (newMapSearchDisplay != '') {
                var j = 0, i = 0, mapSearchJson_len = mapsearchresult.enforceMapSearch.mapSearchJson.length;
                for (i; i < mapSearchJson_len; i = i + 1) {
                    var oldMapSearchDisplay =mapsearchresult.enforceMapSearch._jsonToDisplay(mapsearchresult.enforceMapSearch.mapSearchJson[i]);
                    if (newMapSearchDisplay != oldMapSearchDisplay) {
                        j = j + 1;
                        var oldMapSearch = mapsearchresult.enforceMapSearch._jsonToString(mapsearchresult.enforceMapSearch.mapSearchJson[i]);
                        mapSearch += "," + oldMapSearch;
                    }
                    if (j >= 3) break;
                }
                mapsearchresult.enforceMapSearch._writeSearchCookie("mapSearch", mapSearch);
                mapsearchresult.enforceMapSearch._loadMapSearch();
                mapsearchresult.enforceMapSearch.ajaxbg.hide();
            }
            $('#mapSearchForm').submit();
        },
        _loadMapSearch:function() {
            var mapSearch = mapsearchresult.enforceMapSearch._readSearchCookie('mapSearch'), ul = $("<div ></div>"), i = 0;
            mapsearchresult.enforceMapSearch.mapSearchJson = eval('([' + mapSearch + '])');
            var mapSearchJson_len = mapsearchresult.enforceMapSearch.mapSearchJson.length;
            ul.addClass('recordCon');
            for (i; i < mapSearchJson_len; i = i + 1) {
                var all = mapsearchresult.enforceMapSearch._jsonToDisplay(mapsearchresult.enforceMapSearch.mapSearchJson[i]);
                var part = all, title = '';
                if (part.length > 14) {
                    title = "title='" + all + "'";
                    part = part.substring(0, 14) + '...';
                }
                var li = $("<a href='javascript:void(0)' onclick='mapsearchresult.enforceMapSearch._clickMapSearch(this)' onmouseover='mapsearchresult.centerPointChoose._objMouseOver(this)' onmouseout='mapsearchresult.centerPointChoose._objMouseOut(this)' " + title + ">" + part + "</a>");
                ul.append(li);
            }
            $("#lastSearch").append(ul);
        },
        _buildMapSearch:function() {
            // 关键字区域
            var keyWords = $('#txtMapSearchKeyWords').val();
            var waterMark = $('#txtMapSearchKeyWords').attr('watermark');
            if (keyWords == waterMark) {
                keyWords = '';
            }
            // 期望行业
            var calling = $('#btnIndustry').callingValues();
            // 职位类别
            var jbst = $('#btnFuntype').jobsortValues();
            //福利条件
            var reward=$('#btnOtherReward').otherRewardValues();
            // 月薪范围
            var salary1 = $('#sltSalary').val();
            var min_salary=$('#txtSalaryMin').val();
            var max_salary=$('#txtSalaryMax').val();
            var salary2 = $('#chkSalary2').is(':checked');
            var sa = salary1+','+min_salary +','+max_salary + ',' + salary2;
            //中心位置
            var locationCenter = $('#txtMapCenter').val();
            //搜索范围
            var searchBound = $('#hidSearchBound').val();

            var mapSearch = '{"kw":"' + keyWords + '","call":"' + calling + '","jbst":"' + jbst + '","rw":"' + reward +
                 '","sa":"' + sa + '","lc":"' + locationCenter + '","sb":"' + searchBound + '"}';
            return mapSearch;
        },
        _jsonToString:function(json) {
            var jsonString = '{"kw":"' + json.kw  + '","call":"' + json.call + '","jbst":"' + json.jbst + '","rw":"' +json.rw+
                '","sa":"' + json.sa + '","lc":"' + json.lc + '","sb":"' + json.sb + '"}';
            return jsonString;
        },
        _jsonToDisplay:function(json) {
            //显示的字符串,期望行业,职位类别,月薪范围,中心位置
            var display = '', calling = json.call.split(','), jobsort = json.jbst.split(','),reward=json.rw.split(','), salary = json.sa.split(','), locationCenter = json.lc;
            //行业个数长度,职位类别个数长度
            var calling_len = calling.length, jobsort_len = jobsort.length;reward_len=reward.length;
            if (json.kw != '') {
                display += '+' + json.kw;
            }
            //循环叠加行业
            for (var i = 0; i < calling_len; i = i + 1) {
                var callName = getCallingName(calling[i]);
                display += callName == '' ? '' : '+' + callName;
            }
            //循环叠加职位类别
            for (var i = 0; i < jobsort_len; i = i + 1) {
                var jbstName = getJobsortName(jobsort[i]);
                display += jbstName == '' ? '' : '+' + jbstName;
            }
            //循环叠加福利条件
            for (var i = 0; i < reward_len; i = i + 1) {
                var rwName = getOtherRewardName(reward[i]);
                display += rwName == '' ? '' : '+' + rwName;
            }
            //月薪范围
//            if (salary[0] != '00') {
//               
//                if(salary[1]!=''&&(salary[2]!=''&&salary[2]!='0')){
//                    display+='+'+salary[1]+'至'+salary[2];
//                }else if(salary[1]!=''&&(salary[2]==''||salary[2]=='0')){
//                    display+='+'+salary[1]+'以上';
//                }else if(salary[2]!=''&&(salary[1]==''||salary[1]=='0')){
//                    display+='+'+salary[1]+'以下';
//                }
//                if (salary.length > 1) {
//                    if (salary[3] == 'true') {
//                        display += '+' + '包含面议';
//                    }
//                }
//            }
        //var salary = json.sa.split(',');
        if (salary[0] == 100)
        {
            var minsalary = $("#txtSalaryMin").val();
            var maxsalary = $("#txtSalaryMax").val();

            if ($.trim(minsalary) != '' && $.trim(maxsalary) == '')
            {
                display += '+' + $.trim(minsalary) + '以上';
            }
            else if ($.trim(minsalary) == '' && $.trim(maxsalary) != '')
            {
                display += '+' + $.trim(maxsalary) + '以下';
            }
            else if ($.trim(minsalary) != '' && $.trim(maxsalary) != '')
            {
                display += '+' + minsalary + "—" + maxsalary + "元";
            }
            //            if (salary.length > 3)
            //            {
            //                if (salary[3] == 'true')
            //                {
            //                    display += '+' + '包含面议';
            //                }
            //            }
        }
        else if (salary[0] != '00' && salary[0] != '99')
        {
        
//            if (salary[0] != '' && salary[0] != null && salary[0] != undefined)
//            {
//                display += '+' + salary[0];
//            }
            if (salary.length > 1)
            {
                if ($.trim(salary[1]) != '' && $.trim(salary[2]) == '')
                {
                    display += '+' + $.trim(salary[1]) + '以上';
                }
                else if ($.trim(salary[1]) == '' && $.trim(salary[2]) != '')
                {
                    display += '+' + $.trim(salary[2]) + '以下';
                }else
                {
                    if(salary[2]=='0'){
                        display += '+' + $.trim(salary[1]) + '以上';
                    }else{
                        display += '+' + $.trim(salary[1]) + "—" + $.trim(salary[2]) + "元";
                    }
                }
            }
            //            if (salary.length > 3)
            //            {
            //                if (salary[3] == 'true')
            //                {
            //                    display += '+' + '包含面议';
            //                }
            //            }
        }
        else if (salary[0] == '99')
        {
            display += '+月薪面议';
        }
            //中心地标
            display += locationCenter == '' ? '' : '+' + locationCenter;
            //搜索范围
            if ( eval('mapsearchresult._searchBound.i' + json.sb) != '' && eval('mapsearchresult._searchBound.i' + json.sb) != null && eval('mapsearchresult._searchBound.i' + json.sb) != undefined) {
                display += '+' + eval('mapsearchresult._searchBound.i' + json.sb);
            }
            return display.substring(1, display.length);
        },
        _writeSearchCookie:function(name, value) {
            var expire = new Date();
            expire.setFullYear(expire.getFullYear() + 20);
            expire = '; expires=' + expire.toGMTString();
            document.cookie = name + '=' + escape(value) + expire;
        },
        _readSearchCookie:function(name) {
            var cookieValue = '';
            var search = name + '=';
            if (document.cookie.length > 0) {
                var offset = document.cookie.indexOf(search)
                if (offset != -1) {
                    offset += search.length;
                    var end = document.cookie.indexOf(';', offset);
                    if (end == -1) end = document.cookie.length;
                    cookieValue = unescape(document.cookie.substring(offset, end));
                }
            }
            return cookieValue;
        },
        _clickMapSearch:function(obj) {
            var index = $(obj).index();
            var json =mapsearchresult.enforceMapSearch.mapSearchJson[index];
            // 关键字
            if(json.kw!=''){
                $('#txtMapSearchKeyWords').val(json.kw);
            }
            // 期望行业
            var calling = '"' + json.call.replace(/,/g, '","') + '"';
            $('#btnIndustry').callingValues(eval('[' + calling + ']'));
            // 职位类别
            var jbst = '"' + json.jbst.replace(/,/g, '","') + '"';
            $('#btnFuntype').jobsortValues(eval('[' + jbst + ']'));
            //福利
            var rw = '"' + json.rw.replace(/,/g, '","') + '"';
            $('#btnOtherReward').otherRewardValues(eval('[' + rw + ']'));
            // 月薪范围
            var sa = json.sa.split(',');
            var salContainer = $('#sltSalary').closest('div.teamR');
            var _tempSalDes = salContainer.find('a[thevalue=' + sa[0] + ']').html();
            salContainer.find('span.verSelectTxt').html(_tempSalDes);
            salContainer.find('li').removeClass('cu');
            salContainer.find('a[thevalue=' + sa[0] + ']').closest('li').addClass('cu');
            $('#sltSalary').val(sa[0]);
            if(sa[1]!=''&&sa[1]!='0'){
                $('#txtSalaryLower').val(sa[1]);
            }else{
                $('#txtSalaryLower').val("");
            }
            if(sa[2]!=''&&sa[2]!='0'){
                $('#txtSalaryHigh').val(sa[2]);
            }else{
                $('#txtSalaryHigh').val("");
            }
            if ((sa[1] != ''&&sa[1]!='0') || (sa[2] != ''&&sa[2]!='0'))
            {
                $('#salaryContainer').show();
            }
            $('#chkSalary2').attr('checked', sa[3] == 'true');
           
            //中心位置
            $('#txtMapCenter').val(json.lc);
            // 搜索范围
            mapsearchresult._searchScope.moveValue(json.sb);
            $('#salaryContainer').hide();
            $('#btnSearch').click();
        },
        _cancelSearchCondition:function(type,obj){
            /*1、根据传进来的type来取消对应的选择
              2、去掉自身的标签
              3、提交搜索
            */
            switch(type)
            {
                case 'calling':
                    $('#btnIndustry').callingValues('');
                break;
                case 'jobSort':
                    $('#btnFuntype').jobsortValues('');
                break;
                case 'otherReward':
                    $('#btnOtherReward').otherRewardValues('');
                break;
                case 'salary':
                    $('#txtSalaryLower').val('');
                    $('#txtSalaryHigh').val('');
                    $('#sltSalary').closest('.verSelect').find('a[thevalue=00]').click();
                break;
                case 'keyword':
                    $('#txtMapSearchKeyWords').val('');
                break;
                default:
                    return false;
                break;
            }
            $(obj).remove();
            $('#btnSearch').click();
        }
    },
    jobOperate:{
        initialize:function(){
            //收藏Job
            $('#hlkFav').click(function() {
                if (!checkSelected('jobID')) {
                    $.anchorMsg('请选择需要收藏的职位！', { icon: 'warning' }); return;
                }
                //检测是否登录进行收藏
                var isLogin = checkPersonLogin('mapsearchresult.jobOperate._favJob');
                if (isLogin) { 
                    mapsearchresult.jobOperate._favJob();
                }
            });
            //关闭现场招聘
            $("#fairJob").mouseout(function(even) {
                var reltg = $(even.relatedTarget);
                if (reltg.closest('#fairJob').length <= 0) {
                    $(this).addClass('none');
                }
            });
        },
        _favJob:function(){
            var jobIDs = $('#tdyContent').find('input:checked').fieldSerialize();
            $('#hlkFav').getJSON('/DragonVerPerson/JobSearchResultFav.aspx?operate=fav', jobIDs, function(result) {
                if (result && result.messages) {
                    $.message(result.messages, { title: '操作失败', icon: 'fail' });
                    return;
                }
                else if (result && result.repeat == 'repeat') {
                    $.anchorMsg('职位已经收藏，请不要重复收藏！', { icon: 'fail' });
                    return;
                }
                else {
                    if (readCookie('NotRemind') == 'true' && readCookie('PersonIDs').indexOf(result.personID) >= 0) {
                        $.anchorMsg('收藏职位成功');
                        return;
                    }
                    else {
                        var data = '',result_jobID_len=result.jobID.length,i=0;
                        for (i; i < result_jobID_len ; i = i + 1) {
                            data += '&jobID=' + result.jobID[i];
                        }
                        $.showModal('/DragonVerPerson/JobSearchResultFav.aspx?success=mapsearchresult.jobOperate._favCallback' + data, { title: '职位收藏备注' });
                    }
                }
            });
        },
        _favJobSingle:function(obj){
            //检测是否登录进行收藏
            var isLogin = checkPersonLogin('mapsearchresult.jobOperate._favJobSingle');
            if (isLogin) { 
               var jobID = $(obj).parents('li').find('input').val();
               $(obj).getJSON('/DragonVerPerson/JobSearchResultFav.aspx?operate=fav&jobID='+jobID,{}, function(result) {
                    if (result && result.messages) {
                        $.message(result.messages, { title: '操作失败', icon: 'fail' });
                        return;
                    }
                    else if (result && result.repeat == 'repeat') {
                        $.anchorMsg('职位已经收藏，请不要重复收藏！', { icon: 'fail' });
                        return;
                    }
                    else {
                        if (readCookie('NotRemind') == 'true' && readCookie('PersonIDs').indexOf(result.personID) >= 0) {
                            $.anchorMsg('收藏职位成功');
                            return;
                        }
                        else {
                            var data = '',result_jobID_len=result.jobID.length,i=0;
                            for (i; i < result_jobID_len ; i = i + 1) {
                                data += '&jobID=' + result.jobID[i];
                            }
                            $.showModal('/DragonVerPerson/JobSearchResultFav.aspx?success=mapsearchresult.jobOperate._favCallback' + data, { title: '职位收藏备注' });
                        }
                    }
               });
            }
        },
        ///职位收藏备注
        _favCallback:function(result) {
            if (result && result.NotRemind == 'true') {
                writeCookie('NotRemind', 'true');
                var personIDs = readCookie('PersonIDs');
                if (personIDs.indexOf(result.personID) < 0) {
                    writeCookie('PersonIDs', personIDs + ',' + result.personID);
                }
            }
            if (result.jobID.length > 0) {
                $.anchorMsg('职位收藏备注成功');
            }
            else if (result.messages) {
                $.message(result.messages, { title: '操作失败', icon: 'fail' });
            }
        },
        //现场招聘会 
        _jobFair:function(obj, batchID, cmpID, jobUrlRewrite) {
            $('#fairinfo').find('#fairBook').html(cmpID);
            $('#fairinfo').find('#jobUrlRewrite').html(jobUrlRewrite);
            $('#fairinfo').find('#batchID').html(batchID);
            $('#fairJob').removeClass('none')
            $("#fairJob").css({"top":$(obj).offset().top - 8 ,"left":$(obj).offset().left});
        },
        _showSelectedJob:function(obj) {
            var _self=$(obj);
            var url=_self.closest('.btns').siblings().find('.lst2').find('a').attr('href');
            $(obj).attr('href', 'javascript:void(0)').attr('target','_blank');
            $(obj).attr('href',url);
       },
       _fairBooking:function() {
            if (!checkPersonLogin('fairBooking')) return;
            var cmpID = $('#fairinfo').find('#fairBook').html();
            var batchID = $('#fairinfo').find('#batchID').html();
            $.showModal('/Fair/FairJobBookingAdd.aspx?companyID=' + cmpID + '&batchID=' + batchID + '', { title: '预约职位' });
       },
       _lookFairStation:function(obj) {
           var jobUrlRewrite = $('#fairinfo').find('#jobUrlRewrite').html();
           $(obj).attr('href', jobUrlRewrite);
       },
       _sortfiled:function(obj) {
            var _self=$(obj);
            if(_self.hasClass('down')){
                _self.addClass('up').removeClass('down');
                $('#hddSortname').val($(obj).attr("val")+"asc");
                if($(obj).attr("val")=="issuetime"){
                    _self.attr("title","按发布时间升序");
                }else if($(obj).attr("val")=="reward"){
                    _self.attr("title","按福利指数升序")
                }else if($(obj).attr("val")=="salary"){
                    _self.attr("title","按薪酬升序");
                }
            }else{
                 _self.addClass('down').removeClass('up');
                $('#hddSortname').val($(obj).attr("val")+"desc");
                if($(obj).attr("val")=="issuetime"){
                    _self.attr("title","按发布时间降序");
                }else if($(obj).attr("val")=="reward"){
                    _self.attr("title","按福利指数降序")
                }else if($(obj).attr("val")=="salary"){
                    _self.attr("title","按薪酬降序");
                }
            }
            _self.siblings('a').attr('title',"");
            _self.siblings('a').removeClass();
            $('#btnSearch').click();
       },
       _jobReward:function(obj, jobID) {
            var _self=$(obj);
            _self.closest('#theReward').find('div.recordTxt').show();
            //关闭职位福利
            _self.closest('#theReward').mouseout(function(event)
            {
                  var reltg=$(event.relatedTarget);
                  if(reltg.closest('#theReward').find('#reward' + jobID).length == 0)
                  {
                     $(this).find('div.recordTxt').hide();
                  }
            });
       } 
    }
}
$(document).ready(function(){
     var callingTemp = '';
     var jobsortTemp = '';
     var otherRewardTemp='';
     $('#btnIndustry').callingValues(callingTemp.split(','));
     $('#btnFuntype').jobsortValues(jobsortTemp.split(','));
     $('#btnOtherReward').otherRewardValues(otherRewardTemp.split(','));
     showSearchCondition();
});
//显示搜索条件
function showSearchCondition() {
    //先清空原先的值
    $('#ShowSearchCondition').empty();
    //存储条件容器,获取搜索框的值
    var condition = '', watermark = $('#txtMapSearchKeyWords').attr('watermark');
    //获取中心地标
    var mapcenter = $('#txtMapCenter').val();
    if (!(mapcenter == '' || mapcenter == $('#txtMapCenter').attr('watermark'))) {
        condition += '<a title='+"'"+mapcenter+"'"+' class="unClick" href="javascript:void(0)">' + mapcenter+"</a>";
    }
    //获取搜索范围
    var selSearchBound = $('#hidSearchBound').val();
    if (selSearchBound != '') {
        condition += '<a title='+"'"+eval('mapsearchresult._searchBound.i' + selSearchBound)+"'"+' class="unClick" href="javascript:void(0)">' + eval('mapsearchresult._searchBound.i' + selSearchBound)+"<a>";
    }
    var txtMapSearchKeyWord=$('#txtMapSearchKeyWords').val();
    if (!(txtMapSearchKeyWord == '' || txtMapSearchKeyWord == watermark)) {
        condition += '<a title='+"'"+txtMapSearchKeyWord+"'"+'  href="javascript:void(0);" onclick="mapsearchresult.enforceMapSearch._cancelSearchCondition('+"'keyword'"+',this)">' + txtMapSearchKeyWord+"</a>";
    }
    //获取期望行业
    if ($('#btnIndustry').callingValues().length > 0) {
        var callingTemp = '', callingValues = $('#btnIndustry').callingValues(), i = 0, callingValues_len = callingValues.length;
        for (i; i < callingValues_len; i = i + 1) {
            callingTemp += '/' + getCallingName(callingValues[i]);
        }
        condition += '<a title='+"'"+ callingTemp.substring(1)+"'"+' href="javascript:void(0);" onclick="mapsearchresult.enforceMapSearch._cancelSearchCondition('+"'calling'"+',this)">行业:' + callingTemp.substring(1)+"</a>";
    }
    //获取职位类别
    if ($('#btnFuntype').jobsortValues().length > 0) {
        var jobsortTemp = '', jobsortValues = $('#btnFuntype').jobsortValues(), i = 0, jobsortValues_len = jobsortValues.length;
        for (i; i < jobsortValues_len; i = i + 1) {
            jobsortTemp += '/' + getJobsortName(jobsortValues[i]);
        }
        condition += '<a title='+"'"+ jobsortTemp.substring(1)+"'"+' href="javascript:void(0);" onclick="mapsearchresult.enforceMapSearch._cancelSearchCondition('+"'jobSort'"+',this)">职位:' + jobsortTemp.substring(1)+"</a>";
    }
    //福利
    if ($('#btnOtherReward').otherRewardValues().length > 0) {
        var rewardTemp = '', rewardValues = $('#btnOtherReward').otherRewardValues(), i = 0, rewardValues_len = rewardValues.length;
        for (i; i < rewardValues_len; i = i + 1) {
            rewardTemp += '/' + getOtherRewardName(rewardValues[i]);
        }
        condition += '<a title='+"'"+ rewardTemp.substring(1)+"'"+' href="javascript:void(0);" onclick="mapsearchresult.enforceMapSearch._cancelSearchCondition('+"'otherReward'"+',this)">' + rewardTemp.substring(1)+"</a>";
    }
    //获取月薪范围
    if ($('#txtSalaryMin').val()!='' || $('#txtSalaryMax').val()!='') {
            var salaryTemp;
            if($('#txtSalaryMin').val()!='' && $('#txtSalaryMax').val()!='')
            {
                if($('#txtSalaryMax').val()=='0')
                {
                    salaryTemp = $('#txtSalaryMin').val()+"以上";
                }
                else
                {
                    salaryTemp = $('#txtSalaryMin').val()+'-'+$('#txtSalaryMax').val();
                }
            }
            else if ($('#txtSalaryMin').val()!='')
            {
                salaryTemp = $('#txtSalaryMin').val()+"以上";
            }
            else if($('#txtSalaryMax').val()!='')
            {
                salaryTemp =  $('#txtSalaryMax').val()+"以下";
            }
            
//            if($('#chkSalary2').is(':checked'))
//            {
//                salaryTemp +='+包含面议';
//            }
            condition += '<a href="javascript:void(0);" onclick="mapsearchresult.enforceMapSearch._cancelSearchCondition('+"'salary'"+',this)">月薪范围:' +salaryTemp+"</a>";
        }
    if ($('#selSalary').val() ==  99) {
            condition += '<a href="javascript:void(0);" onclick="_cancelSearchCondition('+"'salary'"+',this)">月薪范围:无要求</a>';
        }  
    if (condition.length > 1) {
        $('#ShowSearchCondition').html(condition);
    }
}
mapsearchresult.initialize();
</script>
<!--地图展示和数据绑定-->
<script type="text/javascript">
    //临时数据,数据行，数据详情,存储标注数组,存储查询出有效的职位编号
    var dataTemp,markerArr = [],jobIDs='';
    $(document).ready(function() {
        dataTemp=$('#tdyContent').find('li').remove().removeAttr('style');
        $('#hidMapY').val(106.63104);
        $('#hidMapX').val(29.7141);
        //初始化地图
        mapInit();
    });
    //地图初始化
    function mapInit(){
        //创建地图
        createMap();
        //设置函数事件
        setMapEvent();
        //添加控件
        addMapControl();
    }
    //创建地图函数：
    function createMap(){
        var map = new BMap.Map("baiduMapContainer");            //在百度地图容器中创建一个地图
        window.map = map;                                       //置为全局
        myDis=new BMapLib.DistanceTool(map);
    }
    //地图事件设置函数：
    function setMapEvent() {
        map.enableDragging();           //启用地图拖拽事件，默认启用(可不写)
        map.enableScrollWheelZoom();    //启用地图滚轮放大缩小
        map.enableDoubleClickZoom();    //启用鼠标双击放大，默认启用(可不写)
        map.enableKeyboard();           //启用键盘上下左右键移动地图
    }   
    //地图控件添加函数：
    function addMapControl() {
        //向地图中添加缩放控件
        var ctrl_nav = new BMap.NavigationControl({ anchor: BMAP_ANCHOR_TOP_LEFT,offset: new BMap.Size(10, 10)});
        map.addControl(ctrl_nav);
        //向地图中添加缩略图控件
        var ctrl_ove = new BMap.OverviewMapControl({ anchor: BMAP_ANCHOR_BOTTOM_RIGHT, isOpen: 0 });
        map.addControl(ctrl_ove);
        //向地图中添加比例尺控件
        var ctrl_sca = new BMap.ScaleControl({anchor:BMAP_ANCHOR_BOTTOM_LEFT});
        map.addControl(ctrl_sca);
        // 添加实时路况控件
        var ctrl_tra = new BMapLib.TrafficControl();      
        map.addControl(ctrl_tra);
        ctrl_tra.setAnchor(BMAP_ANCHOR_TOP_RIGHT); 
    }
    //添加中心地标
    function addCenterMarker(point){
        var map_center_pic_url="http://images.jpjob.com/Images/map/markerred.gif";
        var iconImg = new BMap.Icon(map_center_pic_url, new BMap.Size(21, 21));
        var marker = new BMap.Marker(point, { icon: iconImg });
        map.addOverlay(marker);
    }
    //创建marker
    function addMarker() 
    { 
        //计量器,标注数组长度,图片后缀
        var i=0,markerArr_len=markerArr.length,pic_postfix='.png';
        //蓝色大图片(未被选中的图片)前部分url,红色大图片(被选中的图片)前部分连接
        var blue_big_pic_url="http://images.jpjob.com/Images/map/big/large_blue_",red_big_pic_url="http://images.jpjob.com/Images/map/big/large_red_";
        //每次添加标注前清空所有标注
        map.clearOverlays();
        for (i; i < markerArr_len; i = i + 1)
        {
            var json = markerArr[i];
            var p0 = json.point.split("|")[0];
            var p1 = json.point.split("|")[1];
            var point = new BMap.Point(p0, p1);
            var iconImg =new BMap.Icon(blue_big_pic_url+json.icon+pic_postfix, new BMap.Size(30,42),
            { 
                imageOffset: new BMap.Size(-0,-0), 
                infoWindowOffset: new BMap.Size(12, 1),
                anchor: new BMap.Size(13,42)         
            });
            //覆盖物的位置和图标
            var marker = new BMap.Marker(point, { icon: iconImg });
            //给地图添加覆盖物
            map.addOverlay(marker);
           (function(){
                var index=json.icon;
                var _iw = createInfoWindow(i);
			    var _marker = marker;
			    _marker.addEventListener("click",function(){
			        this.openInfoWindow(_iw);
			        _marker.setIcon( new BMap.Icon(red_big_pic_url+index+pic_postfix, new BMap.Size(30,42),
                    { 
                        imageOffset: new BMap.Size(-0,-0), 
                        infoWindowAnchor: new BMap.Size(12, 1), 
                        anchor: new BMap.Size(13,42) 
                    }));
                    _marker.setTop(true);
                    _marker.setZIndex(9999);
                    $('.map_icon'+index).find("b").removeClass().addClass('ico icoLandO'+index);
                    
		        });
		        _marker.addEventListener("mouseover",function(){
		            _marker.setTop(true);
		        });
		         _marker.addEventListener("mouseout",function(){
			       _marker.setTop(false);
		        });
		        _iw.addEventListener("close",function(){
			        _marker.setIcon( new BMap.Icon(blue_big_pic_url+index+pic_postfix, new BMap.Size(30,42),
                    { 
                        imageOffset: new BMap.Size(-0,-0), 
                        infoWindowAnchor: new BMap.Size(12, 1), 
                        anchor: new BMap.Size(13,42) 
                    }));
                    _marker.setTop(false);
                    _marker.setZIndex(999);
                    $('.map_icon'+index).find("b").removeClass().addClass('ico icoLandB'+index);
		        });
		        $('.map_icon'+index).find("b").click(function(){
		           _marker.closeInfoWindow();
		           $(this).removeClass().addClass('ico icoLandO'+index);
		           _marker.openInfoWindow(_iw);
		           _marker.setIcon( new BMap.Icon(red_big_pic_url+index+pic_postfix, new BMap.Size(30,42),
                   { 
                        imageOffset: new BMap.Size(-0,-0), 
                        infoWindowAnchor: new BMap.Size(12, 1), 
                        anchor: new BMap.Size(13,42) 
                   }));
                   _marker.setTop(true);
                   _marker.setZIndex(9999);
		        });
			})()
        }
        //中心地标
        var centerPoint=new BMap.Point($('#hidMapY').val(), $('#hidMapX').val()); 
        //获取搜索范围
        var bound=parseInt($('#hidSearchBound').val());
        if(bound==0||bound==1){
            map.centerAndZoom(centerPoint,15); 
        }else if(bound==3){
            map.centerAndZoom(centerPoint,14); 
        }else if(bound==5){
            map.centerAndZoom(centerPoint,13); 
        }
        //添加中心地标
        addCenterMarker(centerPoint); 
        var circle = new BMap.Circle(centerPoint,bound*1000);
        //设置圆形边线和填充物颜色以及透明度
        circle.setStrokeColor("#778ec2");
        circle.setStrokeWeight(1);
        circle.setFillColor("#d1d8e8");
        circle.setStrokeStyle("solid");
        circle.setStrokeOpacity(0.8);
        circle.setFillOpacity(0.4);
        map.addOverlay(circle);
    }
    //创建InfoWindow
    function createInfoWindow(i)
    {
        $.ajaxSettings.async = false; 
        var json = markerArr[i];
        var opts = {
            width : 420,     // 信息窗口宽度
            height: 170      // 信息窗口高度
        }
        //构建信息窗口
        var infoWindowContainer=$('<div></div>');
        var infoWindowContent=$('<div></div>').addClass("mapLst");;
        var companyInfo=$('<div></div>').addClass("mapLstTxt");
        //构建公司名和地址
        var companyName=$('<p></p>').append(json.cname.replace("class='blue'",""));
        var companyAddress=$('<p></p>').append("地址："+json.caddress);
        //添加公司名和地址
        companyInfo.append(companyName);
        companyInfo.append(companyAddress);
        infoWindowContent.append(companyInfo);
        //构建职位表头等
        var stationDiv=$('<div></div>').addClass("mapLstThead");
        var stationTable=$('<table cellpadding="0" cellspacing="0" border="0" width="390"></table>');
        //添加职位表头
        stationTable.append('<thead><tr><td width="10"></td><td width="80">职位名称</td><td width="80" align="center">学历</td><td width="70" align="center">工作经验</td><td width="80" align="center">发布时间</td><td width="60" align="center">操作</td><td width="10" class="nobor"></td></tr></thead>');
        stationDiv.append(stationTable);
        var stationListDiv=$("<div></div>").addClass("mapLstTbody");
        $.getJSON('/MapSearchResult.aspx',{operate:'GetJobList',cid:json.cid,jid:json.id},function(data){
            if(data.error){
                 $.anchorMsg(data.error, { icon: 'warning' });
                 return;
            }
            if(data)
            {
                var k=0,jobs = data.jobs,jobs_len = jobs.length;
                if(jobs_len>0)
                {
                    var stationListTable=$('<table cellpadding="0" cellspacing="0" border="0" width="390"></table>');
                    var stationTbody=$("<tbody></tbody>");
                    for(k;k<jobs_len;k = k + 1)
                    {
                        stationTbody.append('<tr><td width="10" class="nobor"></td><td width="80">'+jobs[k].station+'</td><td width="80" align="center">'+jobs[k].degree+'</td><td width="70" align="center">'+jobs[k].workYear+'</td><td width="80" align="center">'+jobs[k].issueTime+'</td><td width="60" align="center">'+jobs[k].handle+'</td><td width="10"></td></tr>');
                    }
                    stationListTable.append(stationTbody);
                    stationListDiv.append(stationListTable);
                }
            }
        });
        
        //追加职位列表信息
        infoWindowContent.append(stationDiv);
        infoWindowContent.append(stationListDiv); 
        infoWindowContainer.append(infoWindowContent);
        //创建infowindow对象
        var iw=new BMap.InfoWindow(infoWindowContainer.html(),opts);
        return iw;
    }
    //分页ajax 回调函数
    function rendData(data,p)
    {
        //分页ajax 回调函数
        var i=0,data_len=data.length,tbody = $('#tdyContent');
        //判断当前页职位所属几个公司，显示几张图片
        var temp=[{value:1,change:0},{value:2,change:0},{value:3,change:0},{value:4,change:0},{value:5,change:0},{value:6,change:0},{value:7,change:0},{value:8,change:0},{value:9,change:0},{value:10,change:0},{value:11,change:0},{value:12,change:0},{value:13,change:0},{value:14,change:0},{value:15,change:0},{value:16,change:0},{value:17,change:0},{value:18,change:0},{value:19,change:0},{value:20,change:0},{value:21,change:0},{value:22,change:0},{value:23,change:0},{value:24,change:0},{value:25,change:0},{value:26,change:0},{value:27,change:0},{value:28,change:0},{value:29,change:0},{value:30,change:0}];
        //清空数组(每页都显示当前页显示职位所属公司的标注)
        markerArr.length=0;tbody.empty();
        //每当翻页取消全选的选中
        $('#chkJobDownID').removeAttr('checked');
        if (data_len == 0){
            tbody.append($('<li class="noData">没有搜索到任何相关数据!</li>'));
        }
        //添加数据到数据区
        for (i; i < data_len; i = i + 1)
        {
            var tr =  dataTemp.clone(true),d = data[i];
            tr.attr('id', 'tr' + d.id);
            tr.find('.btns').html('<a href="javascript:void(0)" onclick="mapsearchresult.jobOperate._showSelectedJob(this)" class="xq">查看详情</a><a href="javascript:void(0)" onclick="mapsearchresult.jobOperate._favJobSingle(this)" class="shc">收藏职位</a>');
            tr.find('.tLst').find('.lst1').html('<input class="checkBox" type="checkbox" value="' + d.id + '" name="jobID" jobFlag="'+d.jobFlag+'" />');
            //未被更改值的可执行对比
            if(temp[i].change==0){
                for(var j=i;j <= data_len;j = j + 1){
                    if(j!=data_len)
                    {
                        if(d.companyId==data[j].companyId)
                        {
                            //与自己对比时记录job_id,但不进行值的交换
                            jobIDs+=data[j].id+",";
                            if(j!=i){
                                if(temp[j].change==0){
                                    temp[j].value=temp[i].value;
                                    temp[j].change=1;
                                }
                            }
                        }else{
                            if(temp[j].change==0){
                                temp[j].value=temp[i].value+1;
                            }
                        }
                    }
                }
            }
            tr.find('.tLst').find('.lst7').html('<a class="map_icon'+temp[i].value+'" href="#map_top"><b class="ico icoLandB'+temp[i].value+'"></b></a>');
            if(d.workYear=='不限'||d.workYear=='应届毕业生'){
                tr.find('.tLst').find('.lst2').html(d.station+'<b class="ico icoGraduates"></b>'); 
            }else{
                tr.find('.tLst').find('.lst2').html(d.station); 
            }
            if(d.fair)
            {
                tr.find('.tLst').find('.lst3').html(d.companyName+'<a href="'+d.fairUrl+'" target="_blank"><b class="ico icoFairs" onclick="mapsearchresult.jobOperate._redirectFair('+"'"+d.fairUrl+"'"+')" onmouseover="mapsearchresult.jobOperate._jobFair(this,'+d.batchID+','+d.companyId+',' + "'" + escape(d.jobUrlRewrite)+"'"+')"></b>'); 
            }
            else
            {
                tr.find('.tLst').find('.lst3').html(d.companyName);
            }
            tr.find('.tLst').find('.lst4').html(d.area);
            tr.find('.tLst').find('.lst5').html(d.salary);
            tr.find('.tLst').find('.lst6').html(d.issueTime);
            tr.find('.tParameter').find('.lst1').html('<b>学历要求：</b><i>'+d.degree+'</i>');
            tr.find('.tParameter').find('.lst2').html('<b>工作经验：</b><i>'+d.workYear+'</i>');
            tr.find('.tParameter').find('.lst3').html('<b>招聘人数：</b><i>'+d.quantity+'人</i>');
            tr.find('.tParameter').find('.lst4').html('<b>年龄范围：</b><i>'+d.age+'</i>');
            tr.find('.tParameter').find('.lst5').html('<b>工作性质：</b><i>'+d.jobType+'</i>');
            tr.find('.tParameter').find('.lst6').html(d.reward);
            tr.find('.tBot').find('.tBotR').html(d.content);
            //行样式
            tr.bind("mouseover",function(){
                var _self=$(this);
                _self.addClass('hov');
            }).bind("mouseout",function(){
                var _self=$(this);
                _self.removeClass('hov');
            });
            
            tbody.append(tr);
            
            //重复就执行下一次循环，不添加标注数组
            if(temp[i].change!=0){
                continue;
            }
            markerArr.push( {id:jobIDs,cid:d.companyId,cname:d.companyName,caddress:d.companyAddress,point:d.mapy + "|" + d.mapx,icon:temp[i].value});
            //每次添加后清空当前的job_ids
            jobIDs='';
        }
        //共多少个职位
        $('#pageCount').html(p.recordCount);
        //将经过urlEncode后的keyword保存
        $('#hidUrlEncodeKeyword').val(p.urlEncodeKeyword);
        //添加标注
        addMarker();
        //计算薪酬水平
        GetStationAvgSalary();
   }
   //计算职位平均薪酬
   function GetStationAvgSalary(){
        var station = $('#txtMapSearchKeyWords').val();
        var data={'operate':'GetStationAvgSalary','station':station};
        $.getJSON('/MapSearchResult.aspx',data,function(json){
            if(json&&json.isSuccess)
            {
                $('#stationAvgSalary').html(json.stationAvgSalary);
                $('#divStationAvgSalary').show();
            }
            else
            {
                 $('#divStationAvgSalary').hide();
            }
        });
   }
</script>

</body>
</html>