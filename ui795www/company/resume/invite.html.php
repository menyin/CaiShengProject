
<!doctype html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <!--    声明ie以最高的模式运行-->
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<meta name="Keywords" content="" />
<meta name="Description" content="" />
<title>面试邀请 简历管理_597人才网</title>
	<!–[if lt IE9]>
	<script src="http://cdn.597.com/js/html5.js?v=2017" charset="utf-8"></script>
	<![endif]–>
<link rel="stylesheet" type="text/css" href="http://cdn.597.com/css/base.css?v=2017" />
<link rel="stylesheet" type="text/css" href="http://cdn.597.com/css/comback.css?v=2017" />

<script type="text/javascript" language="javascript" src="http://cdn.597.com/js/jquery-1.8.3.min.js?v=2017" charset="UTF-8"></script>
<script type="text/javascript" language="javascript" src="http://cdn.597.com/js/common.js?v=2017" charset="UTF-8"></script>
<script type="text/javascript" language="javascript" src="http://cdn.597.com/js/dialog.js?v=2017" charset="UTF-8"></script>
<script type="text/javascript" language="javascript" src="http://cdn.597.com/js/ui_inputFocus.js?v=2017" charset="UTF-8"></script>
<script type="text/javascript" language="javascript" src="http://cdn.597.com/js/ui_tooltip.js?v=2017" charset="UTF-8"></script>
<script type="text/javascript" language="javascript" src="http://cdn.597.com/js/ui_validate.js?v=2017" charset="UTF-8"></script>
<script type="text/javascript" language="javascript" src="http://cdn.597.com/js/jquery.form.js?v=2017" charset="UTF-8"></script>
<script type="text/javascript" language="javascript" src="http://cdn.597.com/js/ui_dropdownlist.js?v=2017" charset="UTF-8"></script>
<script type="text/javascript" language="javascript" src="http://cdn.597.com/js/ui_autocomplete.js?v=2017" charset="UTF-8"></script>
<script type="text/javascript" language="javascript" src="http://cdn.597.com/js/jquery.email.tip.js?v=2017" charset="UTF-8"></script>
<script type="text/javascript" language="javascript" src="http://cdn.597.com/js/jquery.metadata.js?v=2017" charset="UTF-8"></script>

</head>
<body id="body">
<style type="text/css">
hgroup{padding:0;}
.part{padding:10px 20px;zoom:1;}
.part2{padding:0 20px 20px 20px;zoom:1;}
.part .tipTxt{font-size:16px; height:40px; line-height:40px;}
.part .tipTxt em{color:#ff9900; margin:0 5px;}
.part .tipTxt i.jpFntWes{font-size:14px; margin-right:5px;}
.part .tipTxt .del{font-size:12px; margin-left:15px;}

.recHd{background:#f9f9f9; border:1px solid #e6e6e6; padding:17px 15px 0 15px; zoom:1; height:45px; font-size:12px;}
.recHd .tipTxt{float:left; display:inline; line-height:26px; color:#999; font-size:12px;}
.recHd .recHdL{float:left; display:inline; width:570px;}
.recHd .recHdL .conBox{float:left; display:inline;}
.recHd .recHdL .conBox .job{float:left; display:inline; margin-right:10px;}
.recHd .recHdL .conBox .time{float:left; display:inline; margin-right:10px;}
.recHd .recHdL .conBox .sta{float:left; display:inline;}
.recHd .recHdL .conBox .tipTxt i.jpFntWes{font-size:14px; margin-left:5px; position:absolute; right:10px; top:5px; cursor:pointer;}

.recHd .recHdM{float:left; display:inline; width:275px;}
.recHd .recHdM .formMod .l{width:50px; font-size:12px; margin-right:2px; color:#999;}
.recHd .recHdM .formMod .r{width:215px;}
.recHd .recHdM .checkMod .drop{width:378px;}

.recHd .recHdR{float:right; display:inline; width:140px;}
.recHd .recHdR .btns{float:left; display:inline; line-height:26px;}
.recHd .recHdR .btns a{display:inline-block;padding:0 6px;height:22px;line-height:22px;font-size:12px; border-radius:3px;}
.recHd .recHdR .btns a.cu{color:#333;font-weight:bold;background:#d1d1d1; cursor:text;}

.recBd .lstBox{padding:20px 0 0 0; zoom:1;}
.recBd .lst .table{}
.recBd .lst .table tr th{border-bottom:1px solid #dadada;font-weight:normal; color:#999; padding:8px 5px; zoom:1;}
.recBd .lst .formChb input.chb{margin:2px 0 0 0;}
.table tr th,.table tr td{text-align:left;font-size:12px;}
.table .lstBox tr td{border-bottom:1px solid #f1f1f1; padding:8px 5px; zoom:1; color:#666;}
.table .lstBox tr td.gray{color:#bbb;}
.table .lstBox .wid220{width:220px;}
.table .lstBox .wid185{width:185px;}
.table .lstBox .wid150{width:150px;}
.table .lstBox .wid120{width:120px;}
.table .lstBox .wid110{width:110px;}
.table .lstBox .wid100{width:100px;}
.table .lstBox .wid80{width:80px;}
.table .lstBox .wid50{width:50px;}
.table .lstBox .wid40{width:40px;}
.table .lstBox .wid20{width:10px;}
.table .lstBox .time{color:#999;}
.table .lstBox b.name{line-height:44px; margin-left:10px;}
.table .lstBox a.name{line-height:44px; margin-left:5px; font-weight:bold; margin-left:10px; height:44px; width:45px; overflow:hidden; display:block;}
.table .lstBox span.name{float:left; display:block; height:44px;}
.table .lstBox a.name:link{color:#3d84b8;}
.table .lstBox a.name:visited{color:#800080;}
.table .lstBox a.name:hover,.table .lstBox a.name:active{color:#0af;}
.table .lstBox .Un{color:#999; font-weight:bold;margin-left:5px;}
.table .lstBox p.job{color:#444; font-weight:bold; width:110px;overflow:hidden;white-space:nowrap;text-overflow:ellipsis; height:44px; line-height:44px;}
.table .lstBox .photo{background:url(http://cdn.597.com/img/common/user35_44.jpg) no-repeat; width:35px; height:44px; border:0; display:block; float:left;}
.table .lstBox .photo a{width:35px; height:44px; display:block;}
.table .lstBox .photo img{width:35px; height:44px; border:0;}
.table .lstBox .mark a.jpFntWes{font-size:14px; color:#999; margin-left:10px;}
.table .lstBox .markIn a.jpFntWes{font-size:14px; color:#ed3136; margin-left:10px;}
.table .lstBox  p.lateJob{width:110px; line-height:44px; height:44px;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;}
.table .lstBox .tips{position:relative; display:block;}
.table .lstBox .tips i.jpFntWes{font-size:16px; margin-left:5px;}
.table .lstBox .tipBox{position:absolute;left:-32px;*left:40px; top:21px;*top:4px; color:#444;background:#fff; border:1px solid #dadada; padding:5px 0;zoom:1; line-height:22px;}
.table .lstBox .tipBox ul li a{color:#444; width:85px; display:block; padding:0 10px;}
.table .lstBox .tipBox ul li a:hover{color:#00aaff; background:#f5f5f5;}
.table .lstBox .tipBox ul li.rLnk{position:relative; z-index:1;}
.table .lstBox .tipBox ul li.rLnk .downCmt{position:absolute; left:-28px; top:23px; background:#fff; border:1px solid #dadada; width:160px; font-size:12px;padding:10px; zoom:1;}
.table .lstBox .tipBox ul li.rLnk .downCmt i.hbIconMoon{font-size:14px; margin-right:5px;}
.table .lstBox .tipBox ul li.rLnk a.Un{cursor:text; color:#999;}
.table .lstBox .tipBox ul li.rLnk a.Un:hover{color:#999;}
.table .lstBox tr.hov{background:#fffdf3;}

.recBd .lst2 ul li{border:1px solid #dadada; font-size:12px; margin-bottom:13px;}
.recBd .lst2 ul li .sumBd{padding:10px 5px; zoom:1;}
.recBd .lst2 ul li .sumBd .photoB{width:80px; height:100px; display:inline; float:left; margin-left:10px;background:url(http://cdn.597.com/img/common/user80_100.jpg) no-repeat;}
.recBd .lst2 ul li .sumBd .photoB a{width:80px; height:100px; display:block;}
.recBd .lst2 ul li .sumBd .photoB img{width:80px; height:100px; border:0;}
.recBd .lst2 ul li .sumBd .sumCon{float:left; display:inline; margin-left:15px; width:810px;}
.recBd .lst2 ul li .sumBd .sumCon .basInfo{color:#999; display:block; height:24px;}
.recBd .lst2 ul li .sumBd .sumCon .basInfo .basL{float:left; display:inline;}
.recBd .lst2 ul li .sumBd .sumCon .basInfo .basL a{}
.recBd .lst2 ul li .sumBd .sumCon .basInfo .basL a:link{color:#3d84b8;}
.recBd .lst2 ul li .sumBd .sumCon .basInfo .basL a:visited{color:#800080;}
.recBd .lst2 ul li .sumBd .sumCon .basInfo .basL a:hover,.recBd .lst2 ul li .sumBd .sumCon .basInfo .basL a:active{color:#0af;}
.recBd .lst2 ul li .sumBd .sumCon .basInfo .basL b{font-size:14px; margin-right:10px;}
.recBd .lst2 ul li .sumBd .sumCon .basInfo .basR i.unRead{background:#ff6600; color:#fff; padding:0 6px; margin:0 12px 0 10px;}
.recBd .lst2 ul li .sumBd .sumCon .basInfo .basR i.inRead{background:#009900; color:#fff; padding:0 6px; margin:0 12px 0 10px;}
.recBd .lst2 ul li .sumBd .sumCon .basInfo .basR i.inv{background:#009900; color:#fff; padding:0 6px; margin:0 12px 0 10px;}
.recBd .lst2 ul li .sumBd .sumCon .basInfo .basR i.other{background:#999; color:#fff; padding:0 6px; margin:0 12px 0 10px;}
.recBd .lst2 ul li .sumBd .sumCon .basInfo .basR{float:right; display:inline;}
.recBd .lst2 ul li .sumBd .sumCon .basInfo .basL .mark a.jpFntWes{font-size:14px; width:26px; line-height:20px; color:#999; margin-left:10px;}
.recBd .lst2 ul li .sumBd .sumCon .basInfo .basL .mark a.jpFntWes:hover{color:#00aaff;}
.recBd .lst2 ul li .sumBd .sumCon .basInfo .basL .markIn a.jpFntWes{font-size:14px; color:#ed3136; margin-left:10px;}

.recBd .lst2 ul li .sumBd .sumCon .basInfo .basL a.red{color:#d66564;}
.recBd .lst2 ul li .sumBd .sumCon .infoCon{margin-top:3px;color:#666; display:block;}
.recBd .lst2 ul li .sumBd .sumCon .infoCon dl{padding:3px 0;zoom:1; overflow:hidden;}
.recBd .lst2 ul li .sumBd .sumCon .infoCon dl dt{float:left; display:inline; color:#999;}
.recBd .lst2 ul li .sumBd .sumCon .infoCon dl dd{float:left; display:inline;}
.recBd .lst2 ul li .sumBd .sumCon .infoCon dl dd em{padding:0 8px; zoom:1; color:#999;}
.recBd .lst2 ul li .sumBd .sumCon .infoCon dl dd p{width:740px;}
.recBd .lst2 ul li .sumFt{background:#f9f9f9; height:30px; position:relative; z-index:1;}
.recBd .lst2 ul li .sumFt .btns{position:absolute; left:128px; top:04px;}
.recBd .lst2 ul li .sumFt .btns a.btnsF12{height:20px; line-height:20px;}
.recBd .lst2 ul li .sumFt .btns a.btn3Unclick:link,.recBd .lst2 ul li .sumFt .btns a.btn3Unclick:visited,.recBd .lst2 ul li .sumFt .btns a.btn3Unclick:hover{border:1px solid #dadada;}
.recBd .lst2 ul li .sumFt .btns .btn{margin:0 7px;}
.recBd .lst2 ul li .sumFt .btns a.btn3{}
.recBd .lst ul li.hov{border:1px solid #ffe0bb; background:#fffdf3;}
.recBd .lst ul li.hov .sumFt{background:#ffe0bb;}

.recBd .recBtn{padding:10px 5px; zoom:1; height:50px; line-height:50px; font-size:12px;}
.recBd .recBtn .formChb label{margin-top:9px;*margin-top:10px;}
.recBd .recBtn .formChb input.chb{margin-top:19px; _margin-top:0;#margin-top:14px;}
.recBd .recBtn .btns{display:block; float:left; _margin-top:8px;}
.recBd .recBtn .rec{margin:0 10px;}
.recBd .recBtn .ref{margin:0 10px;}

.noData a.btn1{ margin-top:30px;}
.noData a.btn{font-size:14px;}
.noData i.jpFntWes{font-size:14px; margin-right:5px;}
.resume_status1{color:#9eaeb2}
.resume_status2{color:#1ecdab}
</style>

<!--{template company/header}-->
<div class="content" id="content">
	<section class="section">
		<hgroup>
			<!--{if !$items}-->
			<!--{if $_GET}-->
				<div class="noData"><p>未找到相关简历，请更换筛选条件、关键词再试！</p><p><a class="btn" href="javascript:void(0)"  onclick="javascript:history.go(-1);">返回</a></p></div>
			<!--{else}-->
				<div class="noData"><p>还没有面试邀请！</p><p>您可以尝试到<a href="/company/resume/apply.html">收到的简历</a>邀请面试
			<!--{/if}-->
			<!--{else}-->
			<div class="part part1">
				<div class="tipTxt">
					<span class="num">共邀请 <em>{$num_all}</em>人参加面试</span>
					<!--{if $_GET}-->
						<span class="del"><a href="#" id="btnClearFilter"><i class="jpFntWes"></i>清空筛选/搜索条件</a></span>
					<!--{/if}-->
				</div>
				<div class="recHd">
				<form id="frmInvite" method="get" action="/company/resume/invite.html" >
					<input type="hidden" name="search_model" value="0" id="hddSeachModel"/>
					<div class="recHdL">
						<div class="tipTxt">筛选：</div>
						<div class="conBox">
							<div class="job"><span id="tstDropJob" class="drop zindex"></span></div>
							<div class="time"><span id="tstDropTime" class="drop zindex"></span></div>
							<div class="sta"><span id="tstDropSta" class="drop zindex"></span></div>
						</div>
						<div class="clear"></div>
					</div>
					<div class="recHdM">
						<div class="formMod">
							<div class="l">搜索：</div>
							<div class="r">
								 <span class="formText"><input type="text" style="width:135px; font-size:12px;" class="text textGray" value="{$keyword}" name="keyword" id="txtKeyWord"></span>
								 <span class="seaBtn"><a href="#" class="btn3 btnsF12" id="btnResumeSearch">搜索</a></span>
							</div>
							<div class="clear"></div>
						</div>
					</div>
				</div>
				</form>
			</div>
			<div class="part part2">
				<div class="recBd">
					<div class="lstC">
						<div class="lstCon">
							<div class="lst lst1" id="lst1">
								<table class="table" cellpadding="0" cellspacing="0">
									<thead>
										<tr>

											<th class="wid20"><span class="formChb">
											<!--<input type="checkbox"  id="reverseallSelect" class="chb"></span>-->
											</th>
											<th class="wid120">照片/姓名</th>
											<th class="wid40">备注</th>
											<th class="wid110">邀请面试职位</th>
											<!--<th class="wid100">联系电话</th>-->
											<th class="wid50">性别</th>
											<th class="wid50">年龄</th>
											<th class="wid50">学历</th>
											<th class="wid100">发送邀请时间</th>
											<th class="wid100">面试时间</th>
											<th class="wid110">当前状态</th>
											<th class="wid150">操作</th>
										</tr>
									</thead>
									<tbody class="lstBox" id="lstContent">
									 <!--{loop $items $item}-->
										<tr invite="{$item[_inviteId]}" resume="{$item['_rid']}">
											<td class="wid20">
											<!--
											<span class="formChb"><input type="checkbox" name="chkinvite" value="{$item[_inviteId]}" class="chb" disabled="disabled" ></span>
											-->
											</td>
											<td class="wid110">
												<span class="photo"><!--{if $item[status]==9}--><img src="{$item['attachment']}" onerror="this.onerror=null; this.src='http://cdn.597.com/img/v2/resumeM/head-defects.jpg';"/><!--{else}--><a href="/resume.html?rid={$item[_rid]}"  target="_blank" class="uname"><img src="{$item['attachment']}" onerror="this.onerror=null; this.src='http://cdn.597.com/img/v2/resumeM/head-defects.jpg';"/></a><!--{/if}--></span>
												<span class="name"><!--{if $item[status]==9}--><b class="name user_name" name="{$item[realname]}">{$item[realname]}</b><!--{else}--><a href="/resume.html?rid={$item[_rid]}" target="_blank" class="name user_name uname" name="{$item[realname]}">{$item[realname]}</a><!--{/if}--></span>
											</td>
											<td class="wid40"><span class="hbTip mark <!--{if $item[note]}-->markIn<!--{/if}-->"><a href="#" class="jpFntWes"  data-toggle="tooltip" data-placement="right" title="{$item[note]}" >&#xf024;</a></span></td>
											<td class="wid120"><p class="job">{$item[jname]}</p></td>
											<!--<td class="wid100"></td>-->
											<td class="wid50 gray">{$item[gender]}</td>
											<td class="wid50 gray">{$item[birthday]}</td>
											<td class="wid50 gray">{$item[maxEduInfo]}</td>
											<td class="wid100 gray">{$item[_createTime]}</td>
											<td class="wid100"><!--{if $item['CustomTime']}-->{$item['CustomTime']}<!--{else}-->{$item['inviteDate']} {$item[inviteTime]}<!--{/if}--></td>
											<td class="wid110"><em class="status sta "><!--{if $item[_status]}-->{$item[_status]}<!--{else}-->-<!--{/if}--></em></td>
											<td class="wid150">
												<!--{if $item[status]==9}-->
													<a href="#" class="oprecycle" rel="del">删除</a>
												<!--{else}-->
													<a href="javascript:void(0)" id="notJoin">未参加面试</a>&nbsp;<a href="javascript:void(0)" id="employ">录用</a>&nbsp;<a href="javascript:void(0)" id="out">不录用</a>
												<!--{/if}-->
												<!--
												<span class="tips">
													<a href="#" class="btnOperate">操作<i class="jpFntWes">&#xf0dd;</i></a>
													<span class="tipBox zindex" style="display:none">
														<ul>
															<li><a href="#" class="opsetresult">设置面试结果</a></li>
															<li><a href="#" class="opdown">保存到电脑</a></li>
															<li><a href="#" class="opsendmail">转发到邮箱</a></li>
															<li><a href="#" class="oprecycle">放入回收站</a></li>
														</ul>
													</span>
												</span>

												<span class="tips">
													<a href="#" class="oprecycle">删除</a>
												</span>
												-->
											</td>
										</tr>
									<!--{/loop}-->
									</tbody>
								</table>
							</div>
						</div>
						<!--
						<div class="recBtn">
							<span class="formChb"><input type="checkbox" name="deg" id="allSelect" class="chb"><label for="allSelect">全选</label></span>
							<span class="btns">
								<a href="#" class="btn3 btnsF12" id="btnOpsetResult">设置面试结果</a>
								<a href="#" class="btn3 btnsF12" id="btnSaveComputer">保存到电脑</a>
								<a href="#" class="btn3 btnsF12" id="btnSendEmail">转发到邮箱</a>
								<a href="#" class="rec" id="btnOprecycle">放入回收站</a>
							</span>
						</div>
						-->
						<div class="page">
							<!--{if $showpage}-->
								{$showpage}
							<!--{/if}-->
						</div>

					 </div>
				</div>
		   	</div>
		   	<!--{/if}-->
		</hgroup>
	</section>
</div>
<!--{template company/footer}-->
<div class="dgBox downCmtBox" id="downContainer" style="display:none">
	<div class="downCmtTxt">
		<p><a href="#"><i class="hbIconMoon">&#xe1b4;</i>Word文件</a></p>
		<p><a href="#"><i class="hbIconMoon">&#xe1b6;</i>Html文件</a></p>
		<p><a href="#"><i class="hbIconMoon">&#xe1b5;</i>Excel文件</a></p>
	</div>
</div>

<script>
$.setIndex("zindex");//为需要赋层级设置的元素设置class为zindex
$('#tstDropJob').droplist({
	defaultTitle:'按面试职位查看',
	style:'width:178px;',
	noSelectClass:'gray',
	inputWidth:170,
	width:128,
	hddName:'jobstation',
	items:{$jobListStr},
	selectValue:'{$jobstation}',
	maxScroll:10,
	onSelect:function(i,name) {
	   	//选中后的事件
	   invite.submit(0);
}});
$('#tstDropTime').droplist({
	defaultTitle:'按发送邀请时间查看',
	style:'width:168px;',
	noSelectClass:'gray',
	inputWidth:160,
	width:128,
	hddName:'invite_time',
	selectValue:'{$invite_time}',
	items:[{id:'',name:'按发送邀请时间查看'},{id:'99',name:'今天'},{id:'1',name:'昨天'},{id:'7',name:'近7天'},{id:'30',name:'近30天'},{id:'90',name:'近90天'}],
	onSelect:function(i,name) {
	   	//选中后的事件
		invite.submit(0);
}});
$('#tstDropSta').droplist({
	defaultTitle:'按状态查看',
	style:'width:148px;',
	noSelectClass:'gray',
	inputWidth:140,
	width:128,
	hddName:'status',
	selectValue:'{$status}',
	items:{$statusStr},
	onSelect:function(i,name) {
	   	//选中后的事件
		invite.submit(0);
}});


/**
 *  面试邀请
 */
var invite = {
	init:function() {
		this._initEvent();
	},
	_initEvent:function(){
		// 列表操作菜单
		$('#lstContent .btnOperate').click(function(e){
			$(this).closest('[invite]').siblings().find('.tipBox').hide();
			if($(this).next('.tipBox').is(':visible')) {
				$(this).next('.tipBox').hide();
			}else {
				$(this).next('.tipBox').show();
			}
			e.stopPropagation();
			e.preventDefault();
		});
		// 列表样式
		$('#lst1').find('tr').hover(function(){
			$(this).addClass('hov');
		},function(){
			$(this).removeClass('hov');
		});

		$('body').click(function(){
			$('#lstContent .tipBox').hide();
		});
		// 全选/反选
		$('#allSelect').bindCheckBox('chkinvite','#lstContent');
		$('#reverseallSelect').bindCheckBox('chkinvite','#lstContent');
		$('#allSelect').click(function(){
			if($(this).is(':checked')) {
				$('#reverseallSelect').attr('checked','checked');
			}else {
				$('#reverseallSelect').removeAttr('checked');
			}
		});
		$('#reverseallSelect').click(function(){
			if($(this).is(':checked')) {
				$('#allSelect').attr('checked','checked');
			}else {
				$('#allSelect').removeAttr('checked');
			}
		});

		// 水印
		$('#txtKeyWord').watermark('输入简历编号');

		var a = function() {
			var v = $('#txtKeyWord').val();
			if(v==''||v=="输入简历编号") {
				$('#btnResumeSearch').removeClass('btn1').addClass('btn3');
			}else{
				$('#btnResumeSearch').removeClass('btn3').addClass('btn1');
			}
			setTimeout(a,500);
		};
		setTimeout(a,500);
		// 清空筛选条件
		$('#btnClearFilter,#btnClearFilterSearch').click(function(e){
			$('#tstDropJob').initContent();
			$('#tstDropTime').initContent();
			$('#tstDropSta').initContent();
			$('#txtKeyWord').val('').watermark('输入简历编号');
			invite.submit(0);
			e.preventDefault();
		});

		$('#lstContent').tooltip({
			 selector: "a[data-toggle=tooltip]",html:true
		});

		$('#lstContent .mark a').click(function(e){
			 var resume_id = $(this).closest('[resume]').attr('resume');
			 invite._updateRemark(resume_id);
			 e.preventDefault();
		});

		// 单个设置面试结果
		$('#lstContent .opsetresult').click(function(e){
			 var invite_id = $(this).closest('[invite]').attr('invite');
			 invite._setResultWin(invite_id);
			 e.preventDefault();
		});

		// 单个备注
		$('#lstContent .opremark').click(function(e){
			 var resume_id = $(this).closest('[resume]').attr('resume');
			 invite._updateRemark(resume_id);
			 e.preventDefault();
		});

		// 保存到电脑
		$('#lstContent .opdown').click(function(e){
			 var element = $(this).closest('[resume]'),
			 	 resume_id = element.attr('resume');
			 invite._downresume(resume_id);
			 e.preventDefault();
		});

		// 转发到邮箱
		$('#lstContent .opsendmail').click(function(e){
			 var element = $(this).closest('[resume]'),
			 	 resume_id = element.attr('resume');
			 invite._sendEmail(resume_id);
			 e.preventDefault();
		});

		// 删除
		$('#lstContent .oprecycle').click(function(e){
			 var element = $(this).closest('[resume]'),
			 	 invite_id = element.attr('invite'),
			 	 name = element.find('.user_name').attr('name'),
				 val = $(this).attr('rel');
			 if(val == 'del'){
			 	$.confirm('确定要删除该面试邀请?','面试邀请',function(){
					invite._deleteinvite(invite_id);
			 	});
			 }else {
				 $.showModal(encodeURI('/invite/DelInvite/names-'+name+'-ids-'+invite_id+'-v-'+Math.random()+''),{title:'放入回收站'});
	   		 }
			 e.preventDefault();
		});

		// 批量设置面试结果
		$('#btnOpsetResult').click(function(e){
			e.preventDefault();
			var invites = invite.selectInvite();
			if(invites.length<=0) {
				$.anchor('请选择面试邀请',{icon:'info'});
				return;
			}
			invite._setResultWin(invites.join(','));
		});

		// 批量保存到电脑
		$('#btnSaveComputer').click(function(e){
			e.preventDefault();
			var invites = invite.selectInvite();
			if(invites.length<=0) {
				$.anchor('请选择面试邀请',{icon:'info'});
				return;
			}
			var resumeids =[];
			for(var i = 0,len = invites.length;i < len; i+=1 ) {
				resumeids.push($('#lstContent').find('[invite="'+invites[i]+'"]').attr('resume'));
			}
			invite._downresume(resumeids.join(','));
		});

		// 批量转发到邮箱
		$('#btnSendEmail').click(function(e){
			e.preventDefault();
			var invites = invite.selectInvite();
			if(invites.length<=0) {
				$.anchor('请选择面试邀请',{icon:'info'});
				return;
			}
			var resumeids =[];
			for(var i = 0,len = invites.length;i < len; i+=1 ) {
				resumeids.push($('#lstContent').find('[invite="'+invites[i]+'"]').attr('resume'));
			}
			invite._sendEmail(resumeids.join(','));
		});

		// 批量删除
		$('#btnOprecycle').click(function(e){
			e.preventDefault();
			var invites = invite.selectInvite();
			alert(invites);
			if(invites.length<=0) {
				$.anchor('请选择面试邀请',{icon:'info'});
				return;
			}
			var names =[],
				val = cookieutility.get('deleteinvite');
			for(var i = 0,len = invites.length;i < len; i+=1 ) {
				names.push($('#lstContent').find('[invite="'+invites[i]+'"]').find('.user_name').attr('name'));
			}
			 if(val == 'true'){
				 invite._deleteinvite(invites.join(','));
			 }else {
				 $.showModal(encodeURI('/invite/DelInvite/names-'+names.join(',')+'-ids-'+invites.join(',')+'-v-'+Math.random()+''),{title:'放入回收站 '});
	   		 }
		});


		// 按姓名/简历编号搜索
		$('#btnResumeSearch').click(function(){
			 invite.submit(1);
		});

		$("#txtKeyWord").keydown(function(e){
			if(e.keyCode == 13){
				$("#btnResumeSearch").click();
			}
		});

		$("#lstContent #notJoin").click(function(){
			var inviteId=$(this).closest('tr').attr('invite');
			$.confirm('确定设置面试结果为未参加面试?','未参加面试',function(){
				$.getJSON('/api/web/company.api',{'act':'inviteStatus' ,inviteId:inviteId,type:1,cidHash:{$com[cid]}}, function(json) {
					if (json.status >0){
						$.anchorMsg(json.msg);
						window.location.reload();
						return ;
					}else{
						if(json.status ==0){
							$.message(json.msg, { title: '操作失败', icon: 'fail' });
						}else{
							$.message(json.msg, { title: '操作失败', icon: 'fail' });
						}
					}
					return;
				});
			});
		});
		$("#lstContent #employ").click(function(){
			var inviteId=$(this).closest('tr').attr('invite');
			$.confirm('确定设置面试结果为录用?','录用',function(){
				$.getJSON('/api/web/company.api',{'act':'inviteStatus' ,inviteId:inviteId,type:2,cidHash:{$com[cid]}}, function(json) {
					if (json.status >0){
						$.anchorMsg(json.msg);
						window.location.reload();
						return ;
					}else{
						if(json.status ==0){
							$.message(json.msg, { title: '操作失败', icon: 'fail' });
						}else{
							$.message(json.msg, { title: '操作失败', icon: 'fail' });
						}
					}
					return;
				});
			});
		});
		$("#lstContent #out").click(function(){
			var inviteId=$(this).closest('tr').attr('invite');
			$.confirm('确定设置面试结果为不录用?','不录用',function(){
				$.getJSON('/api/web/company.api',{'act':'inviteStatus' ,inviteId:inviteId,type:3,cidHash:{$com[cid]}}, function(json) {
					if (json.status >0){
						$.anchorMsg(json.msg);
						window.location.reload();
						return ;
					}else{
						if(json.status ==0){
							$.message(json.msg, { title: '操作失败', icon: 'fail' });
						}else{
							$.message(json.msg, { title: '操作失败', icon: 'fail' });
						}
					}
					return;
				});
			});
		});
	},
	_deleteinvite:function(ids) {
	   // 删除求职申请
	   $.getJSON('/api/web/company.api?act=delInvite&id='+ids+'&cidHash={$com[cid]}',function(result){
			if(result.status>0) {
				var arr = ids.split(',');
				$.each(arr,function(i,n){
					//更新页面
					var element = $('#lstContent').find('[invite="'+n+'"]');
					element.remove();
				});
				$.anchorMsg('删除成功');
			}else {
				if(result.status==0){
					$.anchorMsg(result.msg, { icon: 'fail' });
				}else{
					$.anchorMsg(result.msg, { icon: 'fail' });
				}
			}
		});
	},
	_updateRemark:function(resumeid) {
		// 更新备注
		$.showModal('/company/resume/note.html?rid='+resumeid,{title:'备注',onclose:function(){
			// 更新备注
			$.getJSON("/api/web/company.api?act=noteList&"+'rid='+resumeid,function(result){
				var element = $('#lstContent').find('[resume="'+resumeid+'"]');
				element.find('span.mark a').unTooltip();
				if(result.remark ==''||result.remark == null) {
					element.find('span.mark').removeClass('markIn').find('a').removeAttr('data-toggle').removeAttr('title');
				}else {
					element.find('span.mark').addClass('markIn').find('a').attr('data-toggle','tooltip').attr('title',result.remark+'&nbsp;'+result.updatetime);
				}
			});
		}});
	},
	_serResult:function(invite_id,result) {
		$.ajax({
			url:"/invite/state/",
			type:"post",
			dataType:"json",
			data:{result:result,id:invite_id},
			success:function(json){
				if(!(json.success||false)){
					$.message(json.error,{title:'设置面试邀请',icon:'fail'});
					return false;
				}
				$.anchorMsg('设置成功',{icon:'success'});
				var arr = invite_id.split(',');
				$.each(arr,function(i,n){
					//更新页面
					var element = $('#lstContent').find('[invite="'+n+'"]'),
						resultClass ='',
						resultName='';
					if(result==3) {
						resultClass ='resume_status1';
						resultName = '面试未过';
					}else if(result==2) {
						resultClass ='resume_status2';
						resultName = '已发offer';
					}else if(result==1) {
											resultClass ='resume_status1';
											resultName = '未参加面试';
					}else if(result ==4){
											resultClass ='resume_status1';
											resultName = '拒绝offer';
										}else if(result ==5){
											resultClass ='resume_status2';
											resultName = '已入职';
										}
					element.find('.status').removeClass().addClass('status sta '+resultClass).html(resultName);
				});
			}
		});
	},
	_setResultWin:function(inviteid) {
		// 设置面试结果
		$.showModal('/invite/SetResult/ids-'+inviteid+'-v-'+Math.random()+'',{title:'设置面试结果'});
	},
	_printresume:function(resumeid) {
		var url = '/resume/htmlprint/resumeid-'+resumeId+'';
		$('#printIframe').attr("src", url);
	},
	_downresume:function(resumeid) {
		var url = '/invite/DownLoad/resumeid-'+resumeid+'';
		$.showModal(url,{title:'请选择保存的文件格式'});
	},
	_downresumeword:function(ids){
		var url = '/resume/worddown/resumeid-'+ids+'-src-apply';
		$(this).attr('href',url).attr('target','_blank');
	},
	_downresumehtml:function(ids) {
		var url = '/resume/htmldown/resumeid-'+ids+'-src-apply';
		$(this).attr('href',url).attr('target','_blank');
	},
	_downresumeExcel:function(ids) {
		// excel下载
		var url = '/excel/index/resumeid-'+ids+'';
		$(this).attr('href',url).attr('target','_blank');
	},
	_downresumePdf:function(ids) {
		var url = '/resume/pdfdown/resumeid-'+ids+'';
		$(this).attr('href',url).attr('target','_blank');
	},
	_sendEmail:function(resumeid) {
		$.showModal('/resume/wordsend/resumeid-'+resumeid+'',{title:'转发到邮箱'});
	},
	selectInvite:function(){
	   var checkboxs = $('#lstContent').find('input[name="chkinvite"]:checked'),
	   	   invites = [];
   	   for(var i=0,len=checkboxs.length;i<len;i+=1) {
   		   invites.push($(checkboxs[i]).val());
   	   }
	   return invites;
   },
   submit:function(searchmodel) {
		if(searchmodel!=null) {
			$('#hddSeachModel').val(searchmodel);
		}
		//清空水印
		$('#frmInvite').clearWatermark();
		$('#frmInvite').get(0).submit();
   }

};
invite.init();
</script>
</body>
</html>
